# Amazon EBS - Elastic Volumes 変更制限の緩和

**リリース日**: 2026年01月15日
**サービス**: Amazon Elastic Block Store (EBS)
**機能**: Elastic Volumes 変更制限の拡張 (24 時間以内に最大 4 回)

## 概要

Amazon Elastic Block Store (EBS) が、24 時間のローリングウィンドウ内でボリュームあたり最大 4 回の Elastic Volumes 変更をサポートするようになりました。Elastic Volumes 変更により、EBS ボリュームのサイズ増加、タイプ変更、パフォーマンス調整が可能です。今回のアップデートにより、過去 24 時間以内に開始した変更が 4 回未満であれば、前回の変更が完了した直後に新しい変更を開始できるようになります。

この機能強化により、突発的なデータ成長や予期しないワークロードスパイクに対応するため、ストレージ容量をすぐにスケールしたり、パフォーマンスを調整したりする運用の俊敏性が向上します。Elastic Volumes 変更では、ボリュームをデタッチしたり、インスタンスを再起動したりすることなくボリュームを変更できるため、アプリケーションはパフォーマンスへの影響を最小限に抑えながら稼働し続けることができます。

**アップデート前の課題**

- 24 時間のローリングウィンドウ内で実行できる Elastic Volumes 変更は、ボリュームあたり 1 回のみに制限されていた
- 急速なデータ成長やワークロードの変動に対応するために複数回の変更が必要な場合、24 時間待つ必要があった
- ストレージ容量やパフォーマンスの段階的な調整が困難で、初回の変更で過剰にプロビジョニングする必要があった

**アップデート後の改善**

- 24 時間のローリングウィンドウ内で、ボリュームあたり最大 4 回の Elastic Volumes 変更が可能になった
- 前回の変更が完了した直後に新しい変更を開始できるため、動的なワークロードへの対応が迅速になった
- ストレージ容量やパフォーマンスを段階的に調整できるため、コスト最適化と柔軟な運用が可能になった
- 既存のワークフローへの変更は不要で、自動的に有効化される

## サービスアップデートの詳細

### 主要機能

1. **変更回数制限の拡張**
   - 従来: 24 時間のローリングウィンドウ内で 1 回の変更のみ
   - 現在: 24 時間のローリングウィンドウ内で最大 4 回の変更が可能
   - 前回の変更が完了した直後に新しい変更を開始できる

2. **変更可能な項目**
   - **ボリュームサイズ**: ストレージ容量を増加 (減少は不可)
   - **ボリュームタイプ**: gp2、gp3、io1、io2、st1、sc1 などのタイプ間で変更
   - **パフォーマンス**: IOPS やスループットを調整

3. **運用への影響最小化**
   - ボリュームのデタッチ不要
   - インスタンスの再起動不要
   - アプリケーションは稼働し続けることができる
   - パフォーマンスへの影響を最小限に抑える

## 技術仕様

### 変更制限の詳細

| 項目 | 詳細 |
|------|------|
| 変更回数制限 | 24 時間のローリングウィンドウ内で最大 4 回 |
| 変更開始タイミング | 前回の変更が完了した直後 |
| 自動有効化 | すべてのリージョンで自動的に有効化 (設定変更不要) |
| 対象ボリューム | すべての EBS ボリュームタイプ (gp2, gp3, io1, io2, st1, sc1, standard) |

### API 変更履歴

関連する API 変更はありません。既存の `ModifyVolume` API をそのまま使用できます。

### 変更プロセス

```bash
# ボリューム変更の例 (AWS CLI)
aws ec2 modify-volume \
    --volume-id vol-1234567890abcdef0 \
    --size 200 \
    --volume-type gp3 \
    --iops 5000 \
    --throughput 250
```

変更は以下のステータスを経過:
1. `modifying`: 変更を開始
2. `optimizing`: サイズ変更は使用可能、最適化が進行中
3. `completed`: すべての変更が完了

## 設定方法

### 前提条件

1. EBS ボリュームが `in-use` または `available` 状態である
2. すべての前回の変更が完了している
3. インスタンスが Elastic Volumes をサポートしている

### 手順

#### ステップ1: ボリューム変更の実行

```bash
# ボリュームサイズを 100 GB から 150 GB に増加
aws ec2 modify-volume \
    --volume-id vol-1234567890abcdef0 \
    --size 150
```

ボリュームのサイズを増加します。この変更は `optimizing` ステータスに達した時点で有効になります。

#### ステップ2: 変更の進行状況を監視

```bash
# 変更の進行状況を確認
aws ec2 describe-volumes-modifications \
    --volume-id vol-1234567890abcdef0
```

変更のステータスを確認し、`completed` になるまで待ちます。

#### ステップ3: 必要に応じて追加の変更を実行

```bash
# さらにサイズを 150 GB から 200 GB に増加
aws ec2 modify-volume \
    --volume-id vol-1234567890abcdef0 \
    --size 200
```

前回の変更が完了した直後に、新しい変更を開始できます。24 時間以内に最大 4 回まで変更可能です。

#### ステップ4: ファイルシステムの拡張

```bash
# Linux の場合: ファイルシステムを拡張
sudo growpart /dev/xvdf 1
sudo resize2fs /dev/xvdf1
```

ボリュームサイズを増加した場合、ファイルシステムを拡張して新しい容量を利用可能にします。

## メリット

### ビジネス面

- **運用の俊敏性向上**: 突発的なデータ成長やワークロードスパイクに即座に対応できる
- **ダウンタイムの削減**: ボリュームのデタッチやインスタンスの再起動が不要なため、アプリケーションの可用性を維持
- **コスト最適化**: 段階的にストレージ容量を増加できるため、初回から過剰にプロビジョニングする必要がない

### 技術面

- **動的なスケーリング**: ワークロードの変動に応じて、ストレージ容量とパフォーマンスを柔軟に調整
- **パフォーマンスへの影響最小化**: 変更はバックグラウンドで実行され、アプリケーションは稼働し続ける
- **簡素な運用**: 既存のワークフローへの変更は不要で、自動的に有効化される

## デメリット・制約事項

### 制限事項

- ボリュームサイズの減少は不可 (増加のみ)
- 24 時間のローリングウィンドウ内で最大 4 回の変更まで
- 変更リクエストを送信した後は、キャンセルできない
- Multi-Attach が有効な io1/io2 ボリュームの変更には制約がある
- ルートボリューム (io1、io2、gp2、gp3、standard) は st1 または sc1 には変更できない

### 考慮すべき点

- 変更には数分から数時間かかる場合がある (リクエストした設定により異なる)
- 完全に初期化されていないボリュームの変更時間は長くなる
- ボリュームタイプを gp2 から gp3 に変更すると、同等以上のパフォーマンスが自動的にプロビジョニングされる
- ファイルシステムとパーティショニングスキームがサポートする容量を超えることはできない

## ユースケース

### ユースケース1: データベースの急速な成長への対応

**シナリオ**: データベースのストレージ容量が急速に増加し、複数回のスケールアップが必要になった。

**実装例**:
```bash
# 初回の変更: 100 GB から 150 GB
aws ec2 modify-volume --volume-id vol-1234567890abcdef0 --size 150

# 変更完了後、さらに増加: 150 GB から 200 GB
aws ec2 modify-volume --volume-id vol-1234567890abcdef0 --size 200

# さらに増加: 200 GB から 250 GB
aws ec2 modify-volume --volume-id vol-1234567890abcdef0 --size 250
```

**効果**: 24 時間以内に 3 回の変更を実行し、データベースの成長に迅速に対応。ダウンタイムなしで運用を継続。

### ユースケース2: ワークロードスパイクへの対応

**シナリオ**: セールイベントによりトラフィックが急増し、ストレージパフォーマンスの段階的な引き上げが必要になった。

**実装例**:
```bash
# 初回の変更: IOPS を 3000 から 5000 に増加
aws ec2 modify-volume --volume-id vol-1234567890abcdef0 --iops 5000

# さらに増加: IOPS を 5000 から 7000 に増加
aws ec2 modify-volume --volume-id vol-1234567890abcdef0 --iops 7000
```

**効果**: ワークロードの変動に応じて IOPS を段階的に調整し、パフォーマンスを最適化。

### ユースケース3: コスト最適化のための段階的スケーリング

**シナリオ**: ストレージ容量を段階的に増加させることで、初回から過剰にプロビジョニングすることを避ける。

**実装例**:
```bash
# 段階的にサイズを増加
# 初回: 100 GB -> 120 GB
aws ec2 modify-volume --volume-id vol-1234567890abcdef0 --size 120

# 2 回目: 120 GB -> 140 GB
aws ec2 modify-volume --volume-id vol-1234567890abcdef0 --size 140

# 3 回目: 140 GB -> 160 GB
aws ec2 modify-volume --volume-id vol-1234567890abcdef0 --size 160
```

**効果**: 必要に応じて段階的にスケールすることで、無駄なコストを削減し、コスト効率を向上。

## 料金

Elastic Volumes 変更自体に追加料金はかかりません。変更後のボリュームサイズ、タイプ、IOPS に基づいて通常の EBS 料金が適用されます。

### 料金例

| ボリュームタイプ | サイズ | IOPS | 月額料金 (概算、us-east-1) |
|-----------------|--------|------|----------------------------|
| gp3 | 100 GB | 3000 | $8.00 |
| gp3 | 200 GB | 5000 | $16.00 + $1.60 (追加 IOPS) |
| io2 | 100 GB | 5000 | $12.50 + $32.50 (IOPS) |

詳細な料金情報は [Amazon EBS 料金ページ](https://aws.amazon.com/ebs/pricing/) を参照してください。

## 利用可能リージョン

この機能は、以下のすべてのリージョンで自動的に有効化されます:

- すべての商用 AWS リージョン
- AWS GovCloud (US) リージョン
- 中国リージョン

## 関連サービス・機能

- **Amazon EC2**: EBS ボリュームをアタッチするコンピュートインスタンス
- **Amazon CloudWatch**: ボリュームのメトリクスとパフォーマンスを監視
- **AWS Systems Manager**: ボリューム変更の自動化とオーケストレーション
- **Amazon EBS Snapshots**: ボリューム変更前のバックアップ作成に使用

## 参考リンク

- [公式発表 (What's New)](https://aws.amazon.com/about-aws/whats-new/2026/01/amazon-ebs-up-to-four-volume-modifications/)
- [ドキュメント: Modify an Amazon EBS volume using Elastic Volumes operations](https://docs.aws.amazon.com/ebs/latest/userguide/ebs-modify-volume.html)
- [Amazon EBS 料金ページ](https://aws.amazon.com/ebs/pricing/)
- [Amazon EBS ドキュメント](https://docs.aws.amazon.com/ebs/)

## まとめ

Amazon EBS の Elastic Volumes 変更制限が緩和され、24 時間以内に最大 4 回の変更が可能になりました。これにより、突発的なデータ成長やワークロードスパイクに迅速に対応でき、運用の俊敏性が大幅に向上します。ダウンタイムなしでストレージ容量やパフォーマンスを段階的に調整できるため、コスト最適化と柔軟な運用が実現できます。既存のワークフローへの変更は不要で、すべてのリージョンで自動的に有効化されるため、すぐに活用できます。
