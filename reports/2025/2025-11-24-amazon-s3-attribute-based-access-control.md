# Amazon S3 - 汎用バケット向け属性ベースアクセス制御 (ABAC)

**リリース日**: 2025 年 11 月 24 日  
**サービス**: Amazon S3  
**機能**: 汎用バケット向け ABAC サポート


## 概要

Amazon S3 は、汎用バケット向けの属性ベースアクセス制御 (ABAC) を発表しました。この機能により、タグを使用してバケットとオブジェクトへのアクセスを動的に制御できます。

大規模環境でのアクセス管理を簡素化し、ポリシー管理の負担を軽減します。

**アップデート前の課題**

- 以前は S3 汎用バケットへのアクセス制御をリソースベースのポリシーや IAM ポリシーで個別に管理する必要があり、大規模環境での管理が複雑だった
- 以前は新しいバケットやユーザーが追加されるたびにポリシーを更新する必要があった
- 以前はタグを使用した動的なアクセス制御が S3 汎用バケットでサポートされていなかった

**アップデート後の改善**

- 今回のアップデートにより、タグベースの属性ベースアクセス制御 (ABAC) で S3 汎用バケットへのアクセスを動的に制御できるようになった
- 今回のアップデートにより、タグの変更だけでアクセス権限を即座に変更でき、ポリシー更新の頻度を大幅に削減できるようになった
- 今回のアップデートにより、プリンシパルタグとリソースタグの照合で大規模環境でもスケーラブルな権限管理が可能になった


## サービスアップデートの詳細

### 主要機能

1. **タグベースのアクセス制御**
   - バケットタグによるアクセス制御
   - オブジェクトタグによるアクセス制御
   - プリンシパルタグとの照合

2. **動的なポリシー**
   - タグ変更による即座のアクセス変更
   - ポリシー更新なしでのアクセス管理
   - スケーラブルな権限管理

3. **IAM 統合**
   - IAM ポリシーでの条件キー
   - セッションタグのサポート
   - ロールベースのアクセス制御との併用


## 技術仕様

### ABAC の条件キー

| 条件キー | 説明 |
|---------|------|
| s3:ResourceTag/key | リソースタグの値 |
| aws:PrincipalTag/key | プリンシパルタグの値 |
| aws:RequestTag/key | リクエストタグの値 |

### ポリシー例

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": "s3:*",
      "Resource": "arn:aws:s3:::*",
      "Condition": {
        "StringEquals": {
          "s3:ResourceTag/Department": "${aws:PrincipalTag/Department}"
        }
      }
    }
  ]
}
```

この IAM ポリシーは、プリンシパル (ユーザーやロール) の Department タグと S3 リソースの Department タグが一致する場合にのみアクセスを許可します。`${aws:PrincipalTag/Department}` は動的に評価され、リクエスト元のタグ値に置き換えられます。


## 設定方法

### 前提条件

1. S3 バケットが作成済み
2. タグ戦略が定義済み
3. 適切な IAM 権限

### 手順

#### ステップ 1: バケットへのタグ付け

```bash
aws s3api put-bucket-tagging \
  --bucket my-bucket \
  --tagging 'TagSet=[{Key=Department,Value=Engineering}]'
```

#### ステップ 2: IAM ポリシーの設定

```bash
aws iam put-user-policy \
  --user-name my-user \
  --policy-name S3ABACPolicy \
  --policy-document file://abac-policy.json
```

#### ステップ 3: ユーザーへのタグ付け

```bash
aws iam tag-user \
  --user-name my-user \
  --tags Key=Department,Value=Engineering
```

このコマンドは、IAM ユーザーに Department タグを付与します。このタグがバケットのタグと一致する場合、ABAC ポリシーによりアクセスが許可されます。


## メリット

### ビジネス面

- **管理の簡素化**: ポリシー更新頻度の削減
- **スケーラビリティ**: 大規模環境での効率的な管理
- **コンプライアンス**: 監査可能なアクセス制御

### 技術面

- **動的制御**: タグ変更による即座のアクセス変更
- **柔軟性**: 複雑なアクセスパターンの実装
- **一貫性**: 組織全体での統一されたアクセス制御


## デメリット・制約事項

### 制限事項

- タグの伝播に若干の遅延が発生する場合がある
- タグキーと値には文字制限がある

### 考慮すべき点

- タグ戦略の事前設計
- 既存のアクセス制御との統合


## ユースケース

### ユースケース 1: 部門別アクセス制御

**シナリオ**: 部門ごとに異なるバケットへのアクセスを制御したい

**効果**: 部門タグを使用して自動的にアクセスを制御

### ユースケース 2: プロジェクト別データ分離

**シナリオ**: プロジェクトごとにデータを分離したい

**効果**: プロジェクトタグでアクセス範囲を制限

### ユースケース 3: 環境別アクセス

**シナリオ**: 開発/ステージング/本番環境でアクセスを分離

**効果**: 環境タグで適切なアクセス権限を付与


## 料金

S3 の標準料金が適用されます。ABAC 機能に追加料金はありません。


## 利用可能リージョン

Amazon S3 が利用可能なすべてのリージョンで利用可能です。


## 関連サービス・機能

- **Amazon S3**: オブジェクトストレージ
- **AWS IAM**: アイデンティティ管理
- **AWS Organizations**: 組織管理


## 参考リンク

- [公式発表 (What's New)](https://aws.amazon.com/about-aws/whats-new/2025/11/amazon-s3-attribute-based-access-control/)
- [AWS Blog](https://aws.amazon.com/blogs/aws/introducing-attribute-based-access-control-for-amazon-s3-general-purpose-buckets/)
- [S3 ABAC ドキュメント](https://docs.aws.amazon.com/AmazonS3/latest/userguide/access-control-overview.html)


## まとめ

Amazon S3 の汎用バケット向け ABAC サポートにより、大規模環境でのアクセス管理が大幅に簡素化されました。タグベースの動的なアクセス制御で、ポリシー管理の負担を軽減できます。
