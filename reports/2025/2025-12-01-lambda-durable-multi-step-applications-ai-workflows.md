# AWS Lambda Durable Functions - ãƒãƒ«ãƒã‚¹ãƒ†ãƒƒãƒ—ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ AI ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®æ§‹ç¯‰

**ãƒªãƒªãƒ¼ã‚¹æ—¥**: 2025 å¹´ 12 æœˆ 1 æ—¥
**ã‚µãƒ¼ãƒ“ã‚¹**: AWS Lambda
**æ©Ÿèƒ½**: Durable Functions (è€ä¹…æ€§ã®ã‚ã‚‹é–¢æ•°)

## æ¦‚è¦

AWS Lambda ã« Durable Functions ãŒè¿½åŠ ã•ã‚Œã€ãƒãƒ«ãƒã‚¹ãƒ†ãƒƒãƒ—ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚„ AI ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ Lambda ã®é–‹ç™ºä½“é¨“å†…ã§ç›´æ¥æ§‹ç¯‰ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚Durable Functions ã¯çŠ¶æ…‹ç®¡ç†ã‚’è‡ªå‹•åŒ–ã—ã€é•·æ™‚é–“å®Ÿè¡Œã‚¿ã‚¹ã‚¯ä¸­ã«æœ€å¤§ 1 å¹´é–“å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ã§ãã€è¿½åŠ ã®ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã‚„ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ¼ãƒ‰ãªã—ã§éšœå®³ã‹ã‚‰å›å¾©ã—ã¾ã™ã€‚

ã“ã®æ©Ÿèƒ½ã«ã‚ˆã‚Šã€æ³¨æ–‡å‡¦ç†ã‚„ AI ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãªã©ã®è¤‡é›‘ãªãƒãƒ«ãƒã‚¹ãƒ†ãƒƒãƒ—ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã€ã‚«ã‚¹ã‚¿ãƒ çŠ¶æ…‹ç®¡ç†ã‚„å¤–éƒ¨ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ãªã—ã§æ§‹ç¯‰ã§ãã¾ã™ã€‚

**ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆå‰ã®èª²é¡Œ**

- è¤‡é›‘ãªãƒãƒ«ãƒã‚¹ãƒ†ãƒƒãƒ—ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã¯ã‚«ã‚¹ã‚¿ãƒ çŠ¶æ…‹ç®¡ç†ãŒå¿…è¦ã ã£ãŸ
- é•·æ™‚é–“å®Ÿè¡Œã‚¿ã‚¹ã‚¯ã«ã¯å¤–éƒ¨ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ (Step Functions ãªã©) ãŒå¿…è¦ã ã£ãŸ
- éšœå®³ã‹ã‚‰ã®å›å¾©ã«ã¯ç‹¬è‡ªã®ãƒªãƒˆãƒ©ã‚¤ãƒ­ã‚¸ãƒƒã‚¯ã®å®Ÿè£…ãŒå¿…è¦ã ã£ãŸ
- å¾…æ©Ÿä¸­ã‚‚ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒˆæ–™é‡‘ãŒç™ºç”Ÿã—ã¦ã„ãŸ

**ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆå¾Œã®æ”¹å–„**

- Lambda å†…ã§ç›´æ¥ãƒãƒ«ãƒã‚¹ãƒ†ãƒƒãƒ—ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’æ§‹ç¯‰å¯èƒ½
- æœ€å¤§ 1 å¹´é–“ã®å®Ÿè¡Œä¸€æ™‚åœæ­¢ã‚’ã‚µãƒãƒ¼ãƒˆ (å¾…æ©Ÿä¸­ã¯ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒˆæ–™é‡‘ãªã—)
- è‡ªå‹•ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã¨éšœå®³å›å¾©
- steps ã¨ waits ã®æ–°ã—ã„ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ã§çŠ¶æ…‹ç®¡ç†ã‚’ç°¡ç´ åŒ–

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³

```mermaid
sequenceDiagram
    participant User as ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼
    participant Lambda as âš¡ Lambda Durable Function
    participant State as ğŸ’¾ çŠ¶æ…‹ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸
    participant External as ğŸŒ å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹

    User->>Lambda: ğŸ“¨ ãƒªã‚¯ã‚¨ã‚¹ãƒˆé–‹å§‹
    Lambda->>State: ğŸ’¾ ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆä¿å­˜ (Step 1)
    Lambda->>External: ğŸ”— å¤–éƒ¨ API å‘¼ã³å‡ºã—
    External-->>Lambda: âœ… ãƒ¬ã‚¹ãƒãƒ³ã‚¹
    Lambda->>State: ğŸ’¾ ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆä¿å­˜ (Step 2)
    
    Note over Lambda: â¸ï¸ äººé–“ã®æ‰¿èªã‚’å¾…æ©Ÿ
    Lambda->>State: ğŸ˜´ å®Ÿè¡Œä¸€æ™‚åœæ­¢
    Note over Lambda: ğŸ’° ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒˆæ–™é‡‘ãªã—
    
    User->>Lambda: âœ‹ æ‰¿èªã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯
    Lambda->>State: â–¶ï¸ å®Ÿè¡Œå†é–‹
    Lambda->>State: ğŸ’¾ ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆä¿å­˜ (Step 3)
    Lambda-->>User: ğŸ‰ å®Œäº†ãƒ¬ã‚¹ãƒãƒ³ã‚¹
```

Durable Functions ã¯ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã¨ãƒªãƒ—ãƒ¬ã‚¤ã®ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã‚’ä½¿ç”¨ã—ã¦ã€ä¸­æ–­ã‚„é•·æ™‚é–“å®Ÿè¡Œãƒ—ãƒ­ã‚»ã‚¹ä¸­ã‚‚é€²è¡ŒçŠ¶æ³ã‚’ç¶­æŒã—ã¾ã™ã€‚

### ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æ¦‚è¦å›³

```mermaid
flowchart LR
    subgraph Input["ğŸ“¥ å…¥åŠ›"]
        A[ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¯ã‚¨ã‚¹ãƒˆ]
    end
    
    subgraph DurableFunction["âš¡ Lambda Durable Function"]
        B[ğŸ“‹ Step 1: æ¤œè¨¼]
        C[ğŸ’³ Step 2: å‡¦ç†]
        D[â¸ï¸ Wait: æ‰¿èªå¾…ã¡]
        E[ğŸ“¦ Step 3: å®Œäº†å‡¦ç†]
    end
    
    subgraph State["ğŸ’¾ çŠ¶æ…‹ç®¡ç†"]
        F[(ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ)]
    end
    
    A --> B
    B --> |ğŸ’¾ ä¿å­˜| F
    B --> C
    C --> |ğŸ’¾ ä¿å­˜| F
    C --> D
    D --> |ğŸ˜´ ä¸€æ™‚åœæ­¢| F
    D --> |âœ‹ æ‰¿èª| E
    E --> |ğŸ’¾ ä¿å­˜| F
    E --> G[ğŸ‰ å®Œäº†]
    
    style B fill:#e1f5fe
    style C fill:#e1f5fe
    style D fill:#fff3e0
    style E fill:#e8f5e9
    style F fill:#f3e5f5
```

å„ã‚¹ãƒ†ãƒƒãƒ—ã§ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆãŒè‡ªå‹•ä¿å­˜ã•ã‚Œã€éšœå®³ç™ºç”Ÿæ™‚ã¯æœ€å¾Œã®ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã‹ã‚‰è‡ªå‹•å†é–‹ã•ã‚Œã¾ã™ã€‚

## ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã®è©³ç´°

### ä¸»è¦æ©Ÿèƒ½

1. **ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã¨ãƒªãƒ—ãƒ¬ã‚¤ (Durable Execution)**
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©ã®ä¸€æ™‚åœæ­¢ãƒã‚¤ãƒ³ãƒˆã§ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã‚’è‡ªå‹•ä¿å­˜
   - éšœå®³ç™ºç”Ÿæ™‚ã«æœ€å¾Œã®ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã‹ã‚‰è‡ªå‹•å†é–‹
   - çŠ¶æ…‹ç®¡ç†ã®è¤‡é›‘ã•ã‚’ SDK ãŒæŠ½è±¡åŒ–

2. **Steps ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–**
   - ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®å„ã‚¹ãƒ†ãƒƒãƒ—ã‚’å®šç¾©
   - å„ã‚¹ãƒ†ãƒƒãƒ—ã§ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã‚’è‡ªå‹•ä¿å­˜
   - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨ãƒªãƒˆãƒ©ã‚¤æˆ¦ç•¥ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½

3. **Waits ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–**
   - å¤–éƒ¨ã‚¤ãƒ™ãƒ³ãƒˆã‚„äººé–“ã®æ‰¿èªã‚’å¾…æ©Ÿ
   - æœ€å¤§ 1 å¹´é–“ã®å¾…æ©Ÿã‚’ã‚µãƒãƒ¼ãƒˆ
   - å¾…æ©Ÿä¸­ã¯ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒˆæ–™é‡‘ãŒç™ºç”Ÿã—ãªã„

4. **è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤ã¨éšœå®³å›å¾©**
   - ä¸€æ™‚çš„ãªéšœå®³ã‹ã‚‰ã®è‡ªå‹•å›å¾©
   - ã‚«ã‚¹ã‚¿ãƒ ãƒªãƒˆãƒ©ã‚¤æˆ¦ç•¥ã®å®šç¾©
   - è£œå„Ÿãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ (ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯) ã®ã‚µãƒãƒ¼ãƒˆ

## æŠ€è¡“ä»•æ§˜

### ã‚µãƒãƒ¼ãƒˆã•ã‚Œã‚‹ãƒ©ãƒ³ã‚¿ã‚¤ãƒ 

| ãƒ©ãƒ³ã‚¿ã‚¤ãƒ  | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ |
|-----------|-----------|
| Python | 3.13ã€3.14 |
| Node.js (JavaScript/TypeScript) | 22ã€24 |

### åˆ©ç”¨å¯èƒ½ãƒªãƒ¼ã‚¸ãƒ§ãƒ³

| ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ | å¯ç”¨æ€§ |
|-----------|--------|
| US East (Ohio) | ä¸€èˆ¬æä¾› |

### SDK

Durable Execution SDK ã¯ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã§æä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚

- [JavaScript/TypeScript SDK](https://github.com/aws/aws-lambda-durable-functions-js)
- [Python SDK](https://github.com/aws/aws-lambda-durable-functions-python)

## è¨­å®šæ–¹æ³•

### å‰ææ¡ä»¶

1. AWS ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
2. AWS CLI ã¾ãŸã¯ AWS Management Console ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹
3. Python 3.13/3.14 ã¾ãŸã¯ Node.js 22/24 ã®é–‹ç™ºç’°å¢ƒ

### æ‰‹é †

#### ã‚¹ãƒ†ãƒƒãƒ— 1: Durable Function ã®ä½œæˆ

AWS Management Console ã§æ–°ã—ã„ Lambda é–¢æ•°ã‚’ä½œæˆã—ã€Durable Functions ã‚’æœ‰åŠ¹åŒ–ã—ã¾ã™ã€‚

```bash
# AWS CLI ã‚’ä½¿ç”¨ã—ãŸé–¢æ•°ä½œæˆ
aws lambda create-function \
  --function-name my-durable-function \
  --runtime python3.14 \
  --handler handler.handler \
  --role arn:aws:iam::123456789012:role/lambda-role \
  --durable-execution-enabled
```

Durable Functions ã‚’æœ‰åŠ¹åŒ–ã™ã‚‹ã¨ã€Lambda ã¯çŠ¶æ…‹ç®¡ç†ã¨ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã‚’è‡ªå‹•çš„ã«å‡¦ç†ã—ã¾ã™ã€‚

#### ã‚¹ãƒ†ãƒƒãƒ— 2: Durable Execution SDK ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# Python
pip install aws-lambda-durable

# Node.js
npm install @aws-lambda/durable
```

SDK ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ã§ã€steps ã¨ waits ã®ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚

#### ã‚¹ãƒ†ãƒƒãƒ— 3: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®å®Ÿè£…

Python ã§ã®å®Ÿè£…ä¾‹:

```python
from aws_lambda_durable import durable, step, wait

@durable
async def order_workflow(event, context):
    # Step 1: æ³¨æ–‡ã®æ¤œè¨¼
    order = await step("validate_order", validate_order, event["order_id"])
    
    # Step 2: æ”¯æ‰•ã„å‡¦ç†
    payment = await step("process_payment", process_payment, order)
    
    # Step 3: äººé–“ã®æ‰¿èªã‚’å¾…æ©Ÿ (æœ€å¤§ 7 æ—¥é–“)
    approval = await wait("wait_for_approval", timeout_days=7)
    
    if approval["approved"]:
        # Step 4: æ³¨æ–‡ã®ç™ºé€
        await step("ship_order", ship_order, order)
        return {"status": "completed"}
    else:
        # è£œå„Ÿ: æ”¯æ‰•ã„ã®è¿”é‡‘
        await step("refund_payment", refund_payment, payment)
        return {"status": "cancelled"}
```

å„ step ã§ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆãŒä¿å­˜ã•ã‚Œã€éšœå®³ç™ºç”Ÿæ™‚ã¯æœ€å¾Œã®ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã‹ã‚‰å†é–‹ã•ã‚Œã¾ã™ã€‚

## ãƒ¡ãƒªãƒƒãƒˆ

### ãƒ“ã‚¸ãƒã‚¹é¢

- **é–‹ç™ºé€Ÿåº¦å‘ä¸Š**: çŠ¶æ…‹ç®¡ç†ã®ãƒœã‚¤ãƒ©ãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆã‚³ãƒ¼ãƒ‰ãŒä¸è¦
- **ã‚³ã‚¹ãƒˆæœ€é©åŒ–**: å¾…æ©Ÿä¸­ã¯ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒˆæ–™é‡‘ãŒç™ºç”Ÿã—ãªã„
- **ä¿¡é ¼æ€§å‘ä¸Š**: è‡ªå‹•éšœå®³å›å¾©ã«ã‚ˆã‚Š SLA ã‚’ç¶­æŒ

### æŠ€è¡“é¢

- **ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ãƒ¢ãƒ‡ãƒ«**: Lambda ã®é–‹ç™ºä½“é¨“ã‚’ç¶­æŒ
- **è‡ªå‹•çŠ¶æ…‹ç®¡ç†**: ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã¨ãƒªãƒ—ãƒ¬ã‚¤ã‚’ SDK ãŒå‡¦ç†
- **æŸ”è»Ÿãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: ã‚«ã‚¹ã‚¿ãƒ ãƒªãƒˆãƒ©ã‚¤æˆ¦ç•¥ã¨è£œå„Ÿãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³

## ãƒ‡ãƒ¡ãƒªãƒƒãƒˆãƒ»åˆ¶ç´„äº‹é …

### åˆ¶é™äº‹é …

- ç¾åœ¨ US East (Ohio) ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã®ã¿ã§åˆ©ç”¨å¯èƒ½
- Python 3.13/3.14 ã¨ Node.js 22/24 ã®ã¿ã‚µãƒãƒ¼ãƒˆ
- æ±ºå®šè«–çš„ãªã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãå¿…è¦ãŒã‚ã‚‹ (ãƒªãƒ—ãƒ¬ã‚¤æ™‚ã«åŒã˜å®Ÿè¡Œãƒ‘ã‚¹ã‚’è¾¿ã‚‹å¿…è¦)

### è€ƒæ…®ã™ã¹ãç‚¹

- éæ±ºå®šè«–çš„ãªæ“ä½œ (ä¹±æ•°ç”Ÿæˆã€å¤–éƒ¨ API å‘¼ã³å‡ºã—) ã¯ step ã§ãƒ©ãƒƒãƒ—ã™ã‚‹å¿…è¦
- å¤§ããªãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ã¯ Amazon S3 ã‚„ DynamoDB ã«ä¿å­˜ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨
- æ—¢å­˜ã® Step Functions ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¨ã®ä½¿ã„åˆ†ã‘ã‚’æ¤œè¨

## ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹

### ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ 1: æ³¨æ–‡å‡¦ç†ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

**ã‚·ãƒŠãƒªã‚ª**: E ã‚³ãƒãƒ¼ã‚¹ã‚µã‚¤ãƒˆã§æ³¨æ–‡ã®æ¤œè¨¼ã€æ”¯æ‰•ã„å‡¦ç†ã€åœ¨åº«ç¢ºä¿ã€ç™ºé€ã‚’é †æ¬¡å®Ÿè¡Œ

**å®Ÿè£…ä¾‹**:
```python
@durable
async def order_processing(event, context):
    order = await step("validate", validate_order, event)
    payment = await step("payment", process_payment, order)
    inventory = await step("inventory", allocate_inventory, order)
    await step("ship", ship_order, order)
    return {"status": "completed", "order_id": order["id"]}
```

**åŠ¹æœ**: å„ã‚¹ãƒ†ãƒƒãƒ—ã§éšœå®³ãŒç™ºç”Ÿã—ã¦ã‚‚è‡ªå‹•å›å¾©ã—ã€æ³¨æ–‡å‡¦ç†ã®ä¿¡é ¼æ€§ã‚’å‘ä¸Š

### ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ 2: äººé–“å‚åŠ å‹ã®æ‰¿èªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

**ã‚·ãƒŠãƒªã‚ª**: çµŒè²»ç”³è«‹ã®è‡ªå‹•å‡¦ç†ã¨ç®¡ç†è€…æ‰¿èªã‚’çµ„ã¿åˆã‚ã›ãŸãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

**å®Ÿè£…ä¾‹**:
```python
@durable
async def expense_approval(event, context):
    expense = await step("validate", validate_expense, event)
    
    # ç®¡ç†è€…ã®æ‰¿èªã‚’æœ€å¤§ 7 æ—¥é–“å¾…æ©Ÿ
    approval = await wait("manager_approval", timeout_days=7)
    
    if approval["approved"]:
        await step("reimburse", process_reimbursement, expense)
        return {"status": "approved"}
    else:
        return {"status": "rejected", "reason": approval["reason"]}
```

**åŠ¹æœ**: å¾…æ©Ÿä¸­ã¯ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒˆæ–™é‡‘ãŒç™ºç”Ÿã›ãšã€ã‚³ã‚¹ãƒˆåŠ¹ç‡ã®è‰¯ã„æ‰¿èªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å®Ÿç¾

### ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ 3: AI ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

**ã‚·ãƒŠãƒªã‚ª**: è¤‡æ•°ã® AI ãƒ¢ãƒ‡ãƒ«ã‚’é †æ¬¡å‘¼ã³å‡ºã—ã€çµæœã‚’çµ±åˆã™ã‚‹ AI ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

**å®Ÿè£…ä¾‹**:
```python
@durable
async def ai_workflow(event, context):
    # Step 1: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®åˆ†æ
    analysis = await step("analyze", analyze_document, event["document"])
    
    # Step 2: è¦ç´„ã®ç”Ÿæˆ
    summary = await step("summarize", generate_summary, analysis)
    
    # Step 3: æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®ç”Ÿæˆ
    recommendations = await step("recommend", generate_recommendations, summary)
    
    return {"summary": summary, "recommendations": recommendations}
```

**åŠ¹æœ**: AI ãƒ¢ãƒ‡ãƒ«å‘¼ã³å‡ºã—ã®éšœå®³ã‹ã‚‰è‡ªå‹•å›å¾©ã—ã€ä¿¡é ¼æ€§ã®é«˜ã„ AI ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å®Ÿç¾

## æ–™é‡‘

Durable Functions ã®æ–™é‡‘ã¯ã€é€šå¸¸ã® Lambda æ–™é‡‘ã«åŠ ãˆã¦ã€ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã®ä¿å­˜ã¨èª­ã¿å–ã‚Šã«å¯¾ã™ã‚‹æ–™é‡‘ãŒç™ºç”Ÿã—ã¾ã™ã€‚

### æ–™é‡‘ä¾‹

| é …ç›® | æ–™é‡‘ |
|------|------|
| Lambda å®Ÿè¡Œæ™‚é–“ | é€šå¸¸ã® Lambda æ–™é‡‘ |
| ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆä¿å­˜ | ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚ãŸã‚Šã®æ–™é‡‘ |
| å¾…æ©Ÿä¸­ | æ–™é‡‘ãªã— |

è©³ç´°ãªæ–™é‡‘ã«ã¤ã„ã¦ã¯ã€[AWS Lambda æ–™é‡‘ãƒšãƒ¼ã‚¸](https://aws.amazon.com/lambda/pricing/)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## åˆ©ç”¨å¯èƒ½ãƒªãƒ¼ã‚¸ãƒ§ãƒ³

ç¾åœ¨ã€US East (Ohio) ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã§ä¸€èˆ¬æä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚ä»–ã®ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã¸ã®å±•é–‹ã¯ä»Šå¾Œäºˆå®šã•ã‚Œã¦ã„ã¾ã™ã€‚

## é–¢é€£ã‚µãƒ¼ãƒ“ã‚¹ãƒ»æ©Ÿèƒ½

- **AWS Step Functions**: ã‚ˆã‚Šè¤‡é›‘ãªã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¿…è¦ãªå ´åˆ
- **Amazon EventBridge**: Durable Functions ã®å®Ÿè¡Œç›£è¦–
- **Lambda Managed Instances**: EC2 ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒˆã§ Lambda ã‚’å®Ÿè¡Œ
- **Amazon DynamoDB**: å¤§ããªçŠ¶æ…‹ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜

## å‚è€ƒãƒªãƒ³ã‚¯

- [å…¬å¼ç™ºè¡¨ (What's New)](https://aws.amazon.com/about-aws/whats-new/2025/12/lambda-durable-multi-step-applications-ai-workflows/)
- [AWS Blog](https://aws.amazon.com/blogs/aws/build-multi-step-applications-and-ai-workflows-with-aws-lambda-durable-functions/)
- [Lambda Durable Functions ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.aws.amazon.com/lambda/latest/dg/durable-functions.html)
- [ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹](https://docs.aws.amazon.com/lambda/latest/dg/durable-best-practices.html)

## ã¾ã¨ã‚

AWS Lambda Durable Functions ã«ã‚ˆã‚Šã€ãƒãƒ«ãƒã‚¹ãƒ†ãƒƒãƒ—ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚„ AI ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ Lambda ã®é–‹ç™ºä½“é¨“å†…ã§ç›´æ¥æ§‹ç¯‰ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚è‡ªå‹•çŠ¶æ…‹ç®¡ç†ã€éšœå®³å›å¾©ã€å¾…æ©Ÿä¸­ã®ã‚³ã‚¹ãƒˆæœ€é©åŒ–ã«ã‚ˆã‚Šã€ä¿¡é ¼æ€§ã®é«˜ã„ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’åŠ¹ç‡çš„ã«æ§‹ç¯‰ã§ãã¾ã™ã€‚Step Functions ã¨ã®ä½¿ã„åˆ†ã‘ã‚’æ¤œè¨ã—ãªãŒã‚‰ã€ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«å¿œã˜ã¦é©åˆ‡ãªã‚µãƒ¼ãƒ“ã‚¹ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚
