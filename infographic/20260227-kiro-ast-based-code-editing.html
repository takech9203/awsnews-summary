<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kiro - AST ベースのコード編集エンジンによる精密なコード操作</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;600;700&display=swap');

        :root {
            --aws-squid-ink: #232F3E;
            --aws-dark-squid: #1A242F;
            --aws-orange: #FF9900;
            --aws-smile-orange: #FFAD33;
            --aws-white: #FFFFFF;
            --aws-light-gray: #D5DBDB;
            --aws-teal: #00A1C9;
            --aws-purple: #8C4FFF;
            --aws-green: #1D8102;
            --aws-red: #D13212;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            background-color: var(--aws-squid-ink);
            font-family: 'Noto Sans JP', 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif;
            color: var(--aws-light-gray);
            font-size: 16px;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            width: 100%;
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 32px;
            flex-wrap: wrap;
            gap: 16px;
        }

        .header-left { flex: 1; min-width: 280px; }

        .service-badge {
            display: inline-block;
            background: var(--aws-orange);
            color: var(--aws-squid-ink);
            padding: 4px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 12px;
        }

        h1 {
            font-size: 32px;
            font-weight: 700;
            color: var(--aws-white);
            line-height: 1.3;
            margin-bottom: 8px;
        }

        .subtitle {
            font-size: 16px;
            color: var(--aws-light-gray);
        }

        .header-right {
            text-align: right;
            font-size: 14px;
            color: var(--aws-light-gray);
        }

        .date-badge {
            background: rgba(255, 153, 0, 0.15);
            border: 1px solid rgba(255, 153, 0, 0.3);
            padding: 6px 14px;
            border-radius: 8px;
            font-size: 14px;
            color: var(--aws-orange);
            font-weight: 600;
        }

        /* Section */
        .section {
            background: var(--aws-dark-squid);
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 24px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        h2 {
            font-size: 22px;
            font-weight: 600;
            color: var(--aws-orange);
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        h3 {
            font-size: 18px;
            font-weight: 600;
            color: var(--aws-white);
            margin-bottom: 12px;
            margin-top: 20px;
        }

        p { margin-bottom: 12px; }

        .highlight {
            background-color: rgba(255, 153, 0, 0.2);
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
            color: var(--aws-orange);
        }

        /* Before/After */
        .before-after-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin: 16px 0;
        }

        .before-card {
            background: rgba(209, 50, 18, 0.1);
            border: 1px solid rgba(209, 50, 18, 0.4);
            border-radius: 8px;
            padding: 16px;
        }

        .before-card .card-label {
            color: var(--aws-red);
            font-weight: 700;
            font-size: 14px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .after-card {
            background: rgba(29, 129, 2, 0.1);
            border: 1px solid rgba(29, 129, 2, 0.4);
            border-radius: 8px;
            padding: 16px;
        }

        .after-card .card-label {
            color: var(--aws-green);
            font-weight: 700;
            font-size: 14px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .before-card ul, .after-card ul {
            list-style: none;
            padding: 0;
        }

        .before-card li, .after-card li {
            padding: 4px 0;
            font-size: 14px;
            display: flex;
            align-items: flex-start;
            gap: 6px;
        }

        .before-card li::before { content: "\2717"; color: var(--aws-red); font-weight: bold; }
        .after-card li::before { content: "\2713"; color: var(--aws-green); font-weight: bold; }

        /* Feature Cards */
        .feature-card {
            background: rgba(255, 153, 0, 0.05);
            border-left: 4px solid var(--aws-orange);
            border-radius: 0 8px 8px 0;
            padding: 16px 20px;
            margin: 12px 0;
        }

        .feature-card-title {
            font-weight: 700;
            color: var(--aws-white);
            font-size: 16px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .feature-card p, .feature-card ul {
            font-size: 14px;
            color: var(--aws-light-gray);
        }

        .feature-card ul {
            list-style: none;
            padding: 0;
        }

        .feature-card li {
            padding: 3px 0;
            padding-left: 18px;
            position: relative;
        }

        .feature-card li::before {
            content: "\2192";
            color: var(--aws-orange);
            position: absolute;
            left: 0;
        }

        /* Tables */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 16px 0;
            font-size: 14px;
        }

        .data-table th {
            background: rgba(255, 153, 0, 0.2);
            color: var(--aws-orange);
            padding: 10px 12px;
            text-align: left;
            font-weight: 600;
            border-bottom: 2px solid rgba(255, 153, 0, 0.3);
        }

        .data-table td {
            padding: 10px 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
            color: var(--aws-light-gray);
        }

        .data-table tr:hover td {
            background: rgba(255, 153, 0, 0.05);
        }

        .improvement-value {
            color: var(--aws-green);
            font-weight: 700;
        }

        /* Use Cases */
        .usecase-card {
            background: rgba(255, 153, 0, 0.08);
            border: 1px solid rgba(255, 153, 0, 0.2);
            border-radius: 8px;
            padding: 20px;
            margin: 12px 0;
        }

        .usecase-card-title {
            font-weight: 700;
            color: var(--aws-orange);
            font-size: 16px;
            margin-bottom: 4px;
        }

        .usecase-scenario {
            font-size: 14px;
            color: var(--aws-light-gray);
            margin-bottom: 12px;
            font-style: italic;
        }

        .usecase-detail {
            font-size: 14px;
            color: var(--aws-light-gray);
            margin-bottom: 8px;
        }

        .usecase-detail ul {
            list-style: none;
            padding: 0;
            margin: 8px 0;
        }

        .usecase-detail li {
            padding: 3px 0;
            padding-left: 18px;
            position: relative;
            font-size: 14px;
        }

        .usecase-detail li::before {
            content: "\2192";
            color: var(--aws-orange);
            position: absolute;
            left: 0;
        }

        .usecase-effect {
            font-size: 14px;
            color: var(--aws-green);
            font-weight: 500;
            margin-top: 8px;
        }

        /* Mermaid */
        .mermaid-container {
            background: #FFFFFF;
            border-radius: 12px;
            padding: 24px;
            margin: 20px 0;
            border: 2px solid rgba(255, 153, 0, 0.3);
            overflow-x: auto;
        }

        .mermaid {
            display: flex;
            justify-content: center;
        }

        /* Flow Diagram */
        .flow-diagram {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            flex-wrap: wrap;
            margin: 24px 0;
        }

        .flow-step {
            background: var(--aws-dark-squid);
            border: 2px solid var(--aws-orange);
            border-radius: 8px;
            padding: 12px 20px;
            text-align: center;
            min-width: 100px;
        }

        .flow-arrow {
            color: var(--aws-orange);
            font-size: 24px;
            font-weight: bold;
        }

        /* Stats */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin: 16px 0;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(255, 153, 0, 0.15), rgba(255, 153, 0, 0.05));
            border: 1px solid rgba(255, 153, 0, 0.3);
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            color: var(--aws-orange);
            display: block;
        }

        .stat-label {
            font-size: 13px;
            color: var(--aws-light-gray);
            margin-top: 4px;
        }

        /* Merit/Demerit */
        .merit-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin: 16px 0;
        }

        .merit-card {
            background: rgba(29, 129, 2, 0.08);
            border: 1px solid rgba(29, 129, 2, 0.3);
            border-radius: 8px;
            padding: 16px;
        }

        .merit-card h4 {
            color: var(--aws-green);
            font-size: 15px;
            margin-bottom: 8px;
        }

        .merit-card li {
            font-size: 14px;
            padding: 3px 0;
        }

        .demerit-card {
            background: rgba(255, 153, 0, 0.08);
            border: 1px solid rgba(255, 153, 0, 0.3);
            border-radius: 8px;
            padding: 16px;
        }

        .demerit-card h4 {
            color: var(--aws-orange);
            font-size: 15px;
            margin-bottom: 8px;
        }

        .demerit-card li {
            font-size: 14px;
            padding: 3px 0;
        }

        .merit-card ul, .demerit-card ul {
            list-style: none;
            padding: 0;
        }

        .merit-card li::before { content: "\2705 "; }
        .demerit-card li::before { content: "\26A0\FE0F "; }

        /* Selector Table */
        .selector-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin: 16px 0;
        }

        .selector-table-card {
            background: rgba(140, 79, 255, 0.05);
            border: 1px solid rgba(140, 79, 255, 0.3);
            border-radius: 8px;
            padding: 16px;
        }

        .selector-table-card h4 {
            color: var(--aws-purple);
            font-size: 15px;
            margin-bottom: 12px;
        }

        .op-table-card {
            background: rgba(0, 161, 201, 0.05);
            border: 1px solid rgba(0, 161, 201, 0.3);
            border-radius: 8px;
            padding: 16px;
        }

        .op-table-card h4 {
            color: var(--aws-teal);
            font-size: 15px;
            margin-bottom: 12px;
        }

        /* Related Services */
        .related-service {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.06);
        }

        .related-service:last-child { border-bottom: none; }

        .related-service-name {
            font-weight: 600;
            color: var(--aws-teal);
            font-size: 14px;
            min-width: 180px;
        }

        .related-service-desc {
            font-size: 14px;
            color: var(--aws-light-gray);
        }

        /* Region */
        .region-badge {
            display: inline-block;
            background: rgba(0, 161, 201, 0.15);
            border: 1px solid rgba(0, 161, 201, 0.3);
            color: var(--aws-teal);
            padding: 6px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 14px;
        }

        /* Summary Box */
        .summary-box {
            background: linear-gradient(135deg, rgba(255, 153, 0, 0.12), rgba(140, 79, 255, 0.08));
            border: 1px solid rgba(255, 153, 0, 0.3);
            border-radius: 8px;
            padding: 20px;
            font-size: 15px;
            line-height: 1.7;
        }

        /* Token Comparison */
        .token-bar-container {
            margin: 16px 0;
        }

        .token-bar-row {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .token-bar-label {
            font-size: 13px;
            color: var(--aws-light-gray);
            min-width: 180px;
            text-align: right;
        }

        .token-bar-wrapper {
            flex: 1;
            position: relative;
            height: 28px;
        }

        .token-bar {
            height: 28px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 8px;
            font-size: 12px;
            font-weight: 600;
            color: var(--aws-white);
        }

        .token-bar.traditional {
            background: linear-gradient(90deg, rgba(209, 50, 18, 0.6), rgba(209, 50, 18, 0.4));
            border: 1px solid rgba(209, 50, 18, 0.6);
        }

        .token-bar.ast {
            background: linear-gradient(90deg, rgba(29, 129, 2, 0.6), rgba(29, 129, 2, 0.4));
            border: 1px solid rgba(29, 129, 2, 0.6);
        }

        .token-reduction {
            font-size: 13px;
            color: var(--aws-green);
            font-weight: 700;
            min-width: 60px;
        }

        /* Footer */
        footer {
            margin-top: 24px;
            padding-top: 16px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            font-size: 12px;
            color: var(--aws-light-gray);
        }

        footer a {
            color: var(--aws-teal);
            text-decoration: none;
            word-break: break-all;
        }

        footer a:hover { color: var(--aws-smile-orange); }

        footer ul {
            list-style: none;
            padding: 0;
        }

        footer li {
            padding: 3px 0;
        }

        /* Responsive */
        @media (max-width: 700px) {
            h1 { font-size: 24px; }
            .before-after-grid, .merit-grid, .selector-grid { grid-template-columns: 1fr; }
            .stats-grid { grid-template-columns: repeat(2, 1fr); }
            .header { flex-direction: column; }
            .header-right { text-align: left; }
            .token-bar-label { min-width: 120px; font-size: 12px; }
        }
    </style>
</head>
<body>
    <div class="container">

        <!-- Header -->
        <div class="header">
            <div class="header-left">
                <span class="service-badge">Kiro</span>
                <h1>&#x1F333; AST ベースのコード編集エンジンによる精密なコード操作</h1>
                <p class="subtitle">テキストベースの編集から構造的なコード理解へ -- トークン消費と編集失敗を根本的に削減</p>
            </div>
            <div class="header-right">
                <span class="date-badge">&#x1F4C5; 2026 年 2 月 27 日</span>
            </div>
        </div>

        <!-- 概要 -->
        <div class="section">
            <h2>&#x1F4CB; 概要</h2>
            <p>Kiro が <span class="highlight">AST (Abstract Syntax Tree) ベース</span>の新しいコードナビゲーション・編集エンジンに関する技術ブログを公開した。このエンジンは、従来のテキストベースのファイル読み込みと文字列マッチングによるコード操作を、構造的なコード理解に基づく精密な操作に置き換える。</p>
            <p>SWE-PolyBench でトークン使用量を <span class="highlight">20% 削減</span>し、脆弱な正規表現やファイル全体のダンプを排除する。</p>

            <div class="before-after-grid">
                <div class="before-card">
                    <div class="card-label">&#x274C; アップデート前の課題</div>
                    <ul>
                        <li>エージェントがファイル全体を読み込んで特定の関数を探す必要があり、大量のトークンと時間を消費</li>
                        <li>コード編集に完全一致の文字列マッチングが必要で、空白やフォーマットの微細な差異で編集が失敗</li>
                        <li>編集失敗後にファイルの再読み込みと再試行が発生し、トークン消費とレイテンシーが増大する悪循環</li>
                        <li>フィーチャーリクエストにおいて、複数ファイルにわたる変更で脆弱な文字列マッチングの問題が累積</li>
                    </ul>
                </div>
                <div class="after-card">
                    <div class="card-label">&#x2705; アップデート後の改善</div>
                    <ul>
                        <li>コードを文字列ではなく構造化されたエンティティとして理解</li>
                        <li>セレクタベースの精密なコード要素の特定により、フォーマット変更に対する耐性を確保</li>
                        <li>PolyBench50 ベンチマークで LLM 呼び出し数を 34.3% 削減、出力トークンを 29.95% 削減</li>
                        <li>フィーチャーリクエストのデモンストレーションでは実行時間を 49.3% 短縮</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- 統計情報 -->
        <div class="section">
            <h2>&#x1F4CA; 数字で見るアップデート効果</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-value">20%</span>
                    <span class="stat-label">トークン使用量削減</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value">34.3%</span>
                    <span class="stat-label">LLM 呼び出し数削減</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value">49.3%</span>
                    <span class="stat-label">実行時間短縮</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value">0</span>
                    <span class="stat-label">ツールエラー</span>
                </div>
            </div>
        </div>

        <!-- アーキテクチャ図 -->
        <div class="section">
            <h2>&#x1F3D7;&#xFE0F; アーキテクチャ図</h2>
            <p>従来のテキストベースアプローチでは、ファイル全体を読み込み、完全一致の文字列マッチングで編集を行っていた。AST ベースエンジンでは、コードを構造的に解析し、セレクタを使用して特定のコード要素を精密にターゲットする。Code Read でシグネチャや構造情報のみを抽出し、Code Write の 4 つの操作タイプとセレクタを組み合わせて、セマンティックな編集を実現する。</p>
            <div class="mermaid-container">
                <pre class="mermaid">
flowchart TD
    subgraph Traditional["&#x1F4C4; 従来のテキストベースアプローチ"]
        direction TB
        RF["&#x1F4D6; readFile&lt;br/&gt;ファイル全体を読み込み"]
        SR["&#x2702;&#xFE0F; strReplace&lt;br/&gt;完全一致文字列マッチング"]
        RF --> SR
    end

    subgraph ASTEngine["&#x1F333; AST ベースエンジン"]
        direction TB
        Parser["&#x1F50D; AST パーサー&lt;br/&gt;コード構造を解析"]

        subgraph ReadOps["&#x1F4D6; Code Read"]
            direction LR
            Sig["&#x1F4CB; シグネチャ抽出"]
            Struct["&#x1F3D7;&#xFE0F; 構造分析"]
            Search["&#x1F50E; 定義検索"]
            Sig ~~~ Struct ~~~ Search
        end

        subgraph WriteOps["&#x270F;&#xFE0F; Code Write"]
            direction LR
            Insert["&#x2795; insert_node"]
            Replace["&#x1F504; replace_node"]
            Delete["&#x1F5D1;&#xFE0F; delete_node"]
            ReplaceIn["&#x2702;&#xFE0F; replace_in_node"]
            Insert ~~~ Replace ~~~ Delete ~~~ ReplaceIn
        end

        Parser --> ReadOps
        Parser --> WriteOps
    end

    subgraph Selectors["&#x1F3AF; セレクタ"]
        direction LR
        ClassMethod["ClassName.methodName"]
        FuncName["function:functionName"]
        FieldName["field:fieldName"]
        EndSel["end"]
        ClassMethod ~~~ FuncName ~~~ FieldName ~~~ EndSel
    end

    subgraph Results["&#x1F4CA; 改善効果"]
        direction LR
        Tokens["&#x1F4C9; トークン 20% 削減"]
        Calls["&#x1F4C9; LLM 呼び出し 34% 削減"]
        Speed["&#x26A1; 実行時間 49% 短縮"]
        Tokens ~~~ Calls ~~~ Speed
    end

    WriteOps --> Selectors
    Selectors --> Results

    classDef cloud fill:none,stroke:#CCCCCC,stroke-width:2px,color:#666666
    classDef old fill:#FFEBEE,stroke:#F44336,stroke-width:2px,color:#333333
    classDef ast fill:#E8F1FF,stroke:#4A90E2,stroke-width:2px,color:#333333
    classDef read fill:#E9F7EC,stroke:#66BB6A,stroke-width:2px,color:#333333
    classDef write fill:#FFF3E0,stroke:#FF9800,stroke-width:2px,color:#333333
    classDef selector fill:#F3E5F5,stroke:#7B61FF,stroke-width:2px,color:#333333
    classDef result fill:#DCEDC8,stroke:#C5E1A5,stroke-width:2px,color:#33691E

    class Traditional cloud
    class RF,SR old
    class ASTEngine cloud
    class Parser ast
    class ReadOps,WriteOps cloud
    class Sig,Struct,Search read
    class Insert,Replace,Delete,ReplaceIn write
    class Selectors cloud
    class ClassMethod,FuncName,FieldName,EndSel selector
    class Results cloud
    class Tokens,Calls,Speed result
                </pre>
            </div>
        </div>

        <!-- 主要機能 -->
        <div class="section">
            <h2>&#x26A1; 主要機能</h2>

            <div class="feature-card">
                <div class="feature-card-title">&#x1F50D; テキストベースコードツールの問題点</div>
                <p style="font-size:14px; margin-bottom:8px;">Kiro IDE は従来、2 つのテキストベースツールに依存していた。</p>
                <ul>
                    <li><strong>readFile</strong>: 特定の関数を探すためにファイルの大部分を読み込む必要があり、タスクに無関係な大量のトークンを消費</li>
                    <li><strong>strReplace</strong>: 完全一致の文字列マッチングが必要で、空白やフォーマットの微細な差異でも編集が失敗したり、意図しない複数箇所がマッチ</li>
                </ul>
                <p style="font-size:14px; margin-top:8px;">これらの問題は複合的に作用し、編集失敗 -> 再読み込み -> 再試行 -> 再失敗という悪循環が発生する。</p>
            </div>

            <div class="feature-card">
                <div class="feature-card-title">&#x1F333; AST ベースエンジンの仕組み</div>
                <p style="font-size:14px;">テキストベースの操作を AST パーシングに置き換え、コードを文字列としてではなく、構造化されたエンティティとして理解する。関数、クラス、メソッド、インポート、およびそれらの関係を構造的に把握する。</p>
            </div>

            <div class="feature-card">
                <div class="feature-card-title">&#x1F4D6; Code Read: ターゲットを絞った情報抽出</div>
                <p style="font-size:14px; margin-bottom:8px;">ファイル内容全体をダンプする代わりに、必要な情報のみを返す。</p>
                <ul>
                    <li><strong>シグネチャ</strong>: 実装詳細なしの関数・クラス定義</li>
                    <li><strong>構造</strong>: 高レベルのコード構成と関係</li>
                    <li><strong>検索結果</strong>: 条件に一致する特定の定義</li>
                </ul>
                <p style="font-size:14px; margin-top:8px;">従来 1,309 トークンを消費する Java クラスの調査が、AST ベースでは <span class="highlight">545 トークン</span>で完了する -- <span class="highlight">58% のトークン削減</span></p>
            </div>

            <div class="feature-card">
                <div class="feature-card-title">&#x270F;&#xFE0F; Code Write: セマンティック編集</div>
                <p style="font-size:14px; margin-bottom:12px;">セレクタを使用してコード要素を精密にターゲットする。</p>

                <div class="selector-grid">
                    <div class="selector-table-card">
                        <h4>&#x1F3AF; セレクタの種類</h4>
                        <table class="data-table" style="margin:0;">
                            <thead>
                                <tr><th>セレクタ</th><th>用途</th></tr>
                            </thead>
                            <tbody>
                                <tr><td><code>ClassName.methodName</code></td><td>特定のメソッドをターゲット</td></tr>
                                <tr><td><code>function:functionName</code></td><td>特定の関数をターゲット</td></tr>
                                <tr><td><code>field:fieldName</code></td><td>クラスフィールドをターゲット</td></tr>
                                <tr><td><code>end</code></td><td>ファイル末尾に追加</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="op-table-card">
                        <h4>&#x1F527; 4 つの操作タイプ</h4>
                        <table class="data-table" style="margin:0;">
                            <thead>
                                <tr><th>操作</th><th>説明</th></tr>
                            </thead>
                            <tbody>
                                <tr><td><code>insert_node</code></td><td>特定の場所に新しいコードを追加</td></tr>
                                <tr><td><code>replace_node</code></td><td>関数やクラス全体を置換</td></tr>
                                <tr><td><code>delete_node</code></td><td>コード要素をクリーンに削除</td></tr>
                                <tr><td><code>replace_in_node</code></td><td>コードブロック内の部分的な編集</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <p style="font-size:14px; margin-top:12px;">TypeScript ファイルへの関数追加の例では、従来 361 トークンに対し AST ベースは <span class="highlight">96 トークン</span>で完了 -- <span class="highlight">73% のトークン削減</span></p>
            </div>
        </div>

        <!-- 技術仕様 -->
        <div class="section">
            <h2>&#x1F4D0; 技術仕様</h2>

            <h3>&#x1F4CA; PolyBench50 ベンチマーク結果</h3>
            <p style="font-size:14px;">PolyBench50 (SWE-PolyBench のサブセット) での評価結果。</p>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>メトリクス</th>
                        <th>従来のアプローチ</th>
                        <th>AST ベースエンジン</th>
                        <th>改善率</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>タスクあたりの LLM 呼び出し数</td>
                        <td>40.88</td>
                        <td>26.86</td>
                        <td><span class="improvement-value">34.30%</span></td>
                    </tr>
                    <tr>
                        <td>出力トークン</td>
                        <td>270,957</td>
                        <td>189,806</td>
                        <td><span class="improvement-value">29.95%</span></td>
                    </tr>
                    <tr>
                        <td>入力トークン</td>
                        <td>680,684</td>
                        <td>541,346</td>
                        <td><span class="improvement-value">20.47%</span></td>
                    </tr>
                </tbody>
            </table>

            <h3>&#x1F680; フィーチャーリクエストデモンストレーション結果</h3>
            <p style="font-size:14px;">「AWS Resource Explorer にサードパーティ統合を追加する」タスクでの評価結果。</p>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>メトリクス</th>
                        <th>従来のアプローチ</th>
                        <th>AST ベースエンジン</th>
                        <th>改善率</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>実行時間</td>
                        <td>9 分 20 秒</td>
                        <td>4 分 44 秒</td>
                        <td><span class="improvement-value">49.30%</span></td>
                    </tr>
                    <tr>
                        <td>LLM 呼び出し数</td>
                        <td>29</td>
                        <td>22</td>
                        <td><span class="improvement-value">24.10%</span></td>
                    </tr>
                    <tr>
                        <td>入力トークン</td>
                        <td>1,350</td>
                        <td>1,192</td>
                        <td><span class="improvement-value">11.70%</span></td>
                    </tr>
                    <tr>
                        <td>出力トークン</td>
                        <td>761</td>
                        <td>654</td>
                        <td><span class="improvement-value">14%</span></td>
                    </tr>
                    <tr>
                        <td>ツールエラー</td>
                        <td>2</td>
                        <td>0</td>
                        <td><span class="improvement-value">-</span></td>
                    </tr>
                </tbody>
            </table>

            <h3>&#x1F4C9; トークン削減の具体例</h3>
            <div class="token-bar-container">
                <p style="font-size:14px; font-weight:600; color:var(--aws-white); margin-bottom:12px;">Java クラスの調査</p>
                <div class="token-bar-row">
                    <span class="token-bar-label">従来: 1,309 トークン</span>
                    <div class="token-bar-wrapper">
                        <div class="token-bar traditional" style="width:100%;">1,309</div>
                    </div>
                    <span class="token-reduction"></span>
                </div>
                <div class="token-bar-row">
                    <span class="token-bar-label">AST: 545 トークン</span>
                    <div class="token-bar-wrapper">
                        <div class="token-bar ast" style="width:41.6%;">545</div>
                    </div>
                    <span class="token-reduction">-58%</span>
                </div>

                <p style="font-size:14px; font-weight:600; color:var(--aws-white); margin-bottom:12px; margin-top:20px;">TypeScript 関数追加</p>
                <div class="token-bar-row">
                    <span class="token-bar-label">従来: 361 トークン</span>
                    <div class="token-bar-wrapper">
                        <div class="token-bar traditional" style="width:100%;">361</div>
                    </div>
                    <span class="token-reduction"></span>
                </div>
                <div class="token-bar-row">
                    <span class="token-bar-label">AST: 96 トークン</span>
                    <div class="token-bar-wrapper">
                        <div class="token-bar ast" style="width:26.6%;">96</div>
                    </div>
                    <span class="token-reduction">-73%</span>
                </div>
            </div>

            <h3>&#x1F4CA; フィーチャーリクエストのトラフィック割合</h3>
            <table class="data-table">
                <thead>
                    <tr><th>モード</th><th>フィーチャーリクエストの割合</th></tr>
                </thead>
                <tbody>
                    <tr><td>Vibe モード</td><td><span class="highlight">45%</span></td></tr>
                    <tr><td>Spec モード</td><td><span class="highlight">67.6%</span></td></tr>
                </tbody>
            </table>
        </div>

        <!-- メリット・デメリット -->
        <div class="section">
            <h2>&#x2696;&#xFE0F; メリット・デメリット</h2>

            <div class="merit-grid">
                <div class="merit-card">
                    <h4>&#x1F4BC; ビジネス面のメリット</h4>
                    <ul>
                        <li>フィーチャーリクエストの実行時間が最大 49.3% 短縮され、開発者の待機時間が大幅に削減</li>
                        <li>トークン使用量が 20 - 30% 削減されることで、AI コーディングの運用コストが低下</li>
                        <li>ツールエラーが削減され、エージェントの出力に対する開発者の信頼が向上</li>
                    </ul>
                </div>
                <div class="merit-card">
                    <h4>&#x1F527; 技術面のメリット</h4>
                    <ul>
                        <li>インデントの違いによって編集が失敗しないフォーマット耐性</li>
                        <li>セレクタにより意図したコード要素のみを正確に変更できる精密なターゲティング</li>
                        <li>コードの周囲が変化しても構造ベースの操作は正しく動作する保守性</li>
                        <li>AST パーシングによりエージェントがコードの構造を真に理解</li>
                    </ul>
                </div>
            </div>

            <div class="demerit-card" style="margin-top: 16px;">
                <h4>&#x26A0;&#xFE0F; 制限事項・考慮点</h4>
                <ul>
                    <li>AST パーシングは言語ごとのパーサーに依存するため、すべてのプログラミング言語で同等のサポートが提供されるとは限らない</li>
                    <li>コメントの修正やフリーテキストの変更など、AST ノードにマッピングしにくい変更には従来のテキストベースアプローチが必要な場合がある</li>
                    <li>セレクタ構文や操作タイプなど、新しい概念をエージェントが適切に使用するまでに最適化が必要</li>
                </ul>
            </div>
        </div>

        <!-- ユースケース -->
        <div class="section">
            <h2>&#x1F3AF; ユースケース</h2>

            <div class="usecase-card">
                <div class="usecase-card-title">&#x1F3E2; ユースケース 1: 大規模コードベースでのフィーチャーリクエスト</div>
                <p class="usecase-scenario">開発者が既存の大規模プロジェクトに新機能を依頼する</p>
                <div class="usecase-detail">
                    <strong style="color:var(--aws-white);">AST ベースアプローチの効果:</strong>
                    <ul>
                        <li>既存のクラスや関数のシグネチャのみを抽出して構造を把握するため、ファイル全体を読み込む必要がない</li>
                        <li><code>ClassName.methodName</code> セレクタで既存メソッドの隣に新メソッドを正確に挿入</li>
                        <li>複数ファイルにわたる変更でも、各ファイルの構造を理解した上で一貫性のある変更を適用</li>
                    </ul>
                </div>
                <p class="usecase-effect">&#x2705; 効果: 実行時間の大幅な短縮と、ツールエラーの排除により、開発者が修正作業に費やす時間を削減</p>
            </div>

            <div class="usecase-card">
                <div class="usecase-card-title">&#x1F504; ユースケース 2: リファクタリング作業</div>
                <p class="usecase-scenario">大きなクラスを複数の小さなクラスに分割するリファクタリングをエージェントに依頼する</p>
                <div class="usecase-detail">
                    <strong style="color:var(--aws-white);">AST ベースアプローチの効果:</strong>
                    <ul>
                        <li><code>replace_node</code> でクラス全体を新しい実装に置換</li>
                        <li><code>insert_node</code> で新しいファイルにクラスを追加</li>
                        <li><code>delete_node</code> で移動済みのメソッドをクリーンに削除</li>
                        <li>フォーマッターが自動整形を行っても、次の編集が失敗しない</li>
                    </ul>
                </div>
                <p class="usecase-effect">&#x2705; 効果: 従来であればフォーマットの差異で繰り返し失敗していた編集が、一度で成功する</p>
            </div>

            <div class="usecase-card">
                <div class="usecase-card-title">&#x1F50D; ユースケース 3: コード調査と理解</div>
                <p class="usecase-scenario">初めてのコードベースの構造を理解し、変更箇所を特定する必要がある</p>
                <div class="usecase-detail">
                    <strong style="color:var(--aws-white);">AST ベースアプローチの効果:</strong>
                    <ul>
                        <li>Code Read のシグネチャ抽出でクラスの公開インターフェースのみを取得</li>
                        <li>構造分析でファイル内のコード構成と関係を俯瞰</li>
                        <li>必要な部分のみを深掘りすることで、無関係なコードの読み込みを回避</li>
                    </ul>
                </div>
                <p class="usecase-effect">&#x2705; 効果: 58% 少ないトークンでコードの構造を把握でき、調査フェーズの効率が大幅に向上</p>
            </div>
        </div>

        <!-- 料金情報 -->
        <div class="section">
            <h2>&#x1F4B0; 料金</h2>
            <p>Kiro の料金プランに含まれる。AST ベースエンジンはトークン使用量を削減するため、既存プランの範囲内でより多くのタスクを処理可能。</p>
        </div>

        <!-- 利用可能リージョン -->
        <div class="section">
            <h2>&#x1F30D; 利用可能リージョン</h2>
            <p><span class="region-badge">&#x1F310; グローバル</span></p>
        </div>

        <!-- 関連サービス -->
        <div class="section">
            <h2>&#x1F517; 関連サービス・機能</h2>
            <div class="related-service">
                <span class="related-service-name">&#x1F4BB; Kiro IDE</span>
                <span class="related-service-desc">AI 搭載統合開発環境。AST ベースエンジンを組み込んだ基盤プラットフォーム</span>
            </div>
            <div class="related-service">
                <span class="related-service-name">&#x2328;&#xFE0F; Kiro CLI</span>
                <span class="related-service-desc">コマンドラインインターフェース。AST ベースエンジンの恩恵を受ける</span>
            </div>
            <div class="related-service">
                <span class="related-service-name">&#x1F4DD; Kiro Specs</span>
                <span class="related-service-desc">構造化された開発ワークフロー。フィーチャーリクエストの Spec モードで AST ベースエンジンの効果が特に顕著</span>
            </div>
            <div class="related-service">
                <span class="related-service-name">&#x1F4CA; SWE-PolyBench</span>
                <span class="related-service-desc">Kiro が使用するベンチマーク。フィーチャーリクエストの例を含み、AST ベースエンジンの評価に使用</span>
            </div>
            <div class="related-service">
                <span class="related-service-name">&#x1F4E1; CORAL</span>
                <span class="related-service-desc">Kiro の継続的最適化システム。AST ベースエンジンの導入もこうした分析に基づく改善の一環</span>
            </div>
        </div>

        <!-- まとめ -->
        <div class="section">
            <h2>&#x1F4DD; まとめ</h2>
            <div class="summary-box">
                <p>Kiro の AST ベースコード編集エンジンは、AI コーディングエージェントにおけるコード操作の精度と効率を根本的に改善するアップデートである。従来のテキストベースアプローチでは、ファイル全体の読み込みと脆弱な文字列マッチングがトークン消費の増大と編集失敗の原因となっていた。</p>
                <p>AST ベースエンジンはコードを構造化されたエンティティとして理解し、セレクタと型付き操作によって精密な編集を実現する。PolyBench50 で <span class="highlight">LLM 呼び出し数 34.3% 削減</span>、<span class="highlight">トークン使用量 20 - 30% 削減</span>、フィーチャーリクエストで<span class="highlight">実行時間 49.3% 短縮</span>という成果を達成した。</p>
                <p>フォーマット変更に対する耐性、精密なターゲティング、コード構造の理解という特性は、特にフィーチャーリクエストにおいて大きな価値を提供する。本エンジンは既に本番環境で利用可能である。</p>
            </div>
        </div>

        <!-- Footer -->
        <footer>
            <p><strong>&#x1F4CE; 出典:</strong></p>
            <ul>
                <li>&#x1F4DD; <a href="https://kiro.dev/blog/surgical-precision-with-ast/" target="_blank" rel="noopener noreferrer">Kiro Blog - Surgical precision with AST-based code editing</a></li>
                <li>&#x1F3E0; <a href="https://kiro.dev/" target="_blank" rel="noopener noreferrer">Kiro</a></li>
                <li>&#x1F4D6; <a href="https://kiro.dev/docs/" target="_blank" rel="noopener noreferrer">Kiro ドキュメント</a></li>
            </ul>
        </footer>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'base',
            themeVariables: {
                primaryColor: '#FF9900',
                primaryTextColor: '#232F3E',
                primaryBorderColor: '#FF9900',
                lineColor: '#FF9900',
                secondaryColor: '#F5F5F5',
                tertiaryColor: '#FAFAFA',
                background: '#FFFFFF',
                mainBkg: '#FFF3E0',
                nodeBorder: '#FF9900',
                clusterBkg: '#FFF8E1',
                clusterBorder: '#FF9900',
                edgeLabelBackground: '#FFFFFF',
                textColor: '#232F3E'
            }
        });
    </script>
</body>
</html>