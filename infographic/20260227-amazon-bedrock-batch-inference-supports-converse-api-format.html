<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Amazon Bedrock - バッチ推論での Converse API フォーマットサポート</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;600;700&display=swap');

    :root {
      --aws-squid-ink: #232F3E;
      --aws-dark-squid: #1A242F;
      --aws-orange: #FF9900;
      --aws-smile-orange: #FFAD33;
      --aws-white: #FFFFFF;
      --aws-light-gray: #D5DBDB;
      --aws-teal: #00A1C9;
      --aws-purple: #8C4FFF;
      --aws-green: #1D8102;
      --aws-red: #D13212;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      background-color: var(--aws-squid-ink);
      font-family: 'Noto Sans JP', 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif;
      color: var(--aws-light-gray);
      font-size: 16px;
      line-height: 1.6;
      padding: 20px;
    }

    .container {
      max-width: 1000px;
      margin: 0 auto;
      width: 100%;
    }

    /* Header */
    .header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 32px;
      flex-wrap: wrap;
      gap: 16px;
    }
    .header-left { flex: 1; min-width: 280px; }
    .header-right { text-align: right; }

    h1 {
      font-size: 36px;
      font-weight: 700;
      color: var(--aws-white);
      margin: 0 0 8px 0;
      line-height: 1.3;
    }

    .service-badge {
      display: inline-block;
      background: var(--aws-orange);
      color: var(--aws-squid-ink);
      padding: 4px 14px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .subtitle {
      font-size: 16px;
      color: var(--aws-light-gray);
    }

    .release-date {
      font-size: 14px;
      color: var(--aws-light-gray);
      opacity: 0.8;
    }

    /* Sections */
    h2 {
      font-size: 24px;
      font-weight: 600;
      color: var(--aws-orange);
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .section {
      background: var(--aws-dark-squid);
      border-radius: 8px;
      padding: 24px;
      margin-bottom: 24px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .highlight {
      background-color: rgba(255, 153, 0, 0.2);
      padding: 2px 6px;
      border-radius: 4px;
      font-weight: 600;
      color: var(--aws-orange);
    }

    /* Before/After */
    .before-after {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-top: 16px;
    }
    @media (max-width: 600px) {
      .before-after { grid-template-columns: 1fr; }
    }
    .before-box, .after-box {
      border-radius: 8px;
      padding: 16px;
    }
    .before-box {
      background: rgba(209, 50, 18, 0.1);
      border: 1px solid rgba(209, 50, 18, 0.4);
    }
    .after-box {
      background: rgba(29, 129, 2, 0.1);
      border: 1px solid rgba(29, 129, 2, 0.4);
    }
    .before-box h3 {
      color: var(--aws-red);
      font-size: 16px;
      margin-bottom: 10px;
    }
    .after-box h3 {
      color: var(--aws-green);
      font-size: 16px;
      margin-bottom: 10px;
    }
    .before-box li, .after-box li {
      margin-bottom: 6px;
      font-size: 14px;
      list-style: none;
      padding-left: 20px;
      position: relative;
    }
    .before-box li::before {
      content: "\2718";
      color: var(--aws-red);
      position: absolute;
      left: 0;
      font-weight: bold;
    }
    .after-box li::before {
      content: "\2714";
      color: var(--aws-green);
      position: absolute;
      left: 0;
      font-weight: bold;
    }

    /* Feature Cards */
    .feature-cards {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
      margin-top: 16px;
    }
    @media (max-width: 600px) {
      .feature-cards { grid-template-columns: 1fr; }
    }
    .feature-card {
      background: var(--aws-dark-squid);
      border-radius: 8px;
      padding: 16px;
      border-left: 4px solid var(--aws-orange);
      border-top: 1px solid rgba(255, 255, 255, 0.08);
      border-right: 1px solid rgba(255, 255, 255, 0.08);
      border-bottom: 1px solid rgba(255, 255, 255, 0.08);
    }
    .feature-card-title {
      font-size: 16px;
      font-weight: 600;
      color: var(--aws-white);
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .feature-card-body {
      font-size: 14px;
      color: var(--aws-light-gray);
    }
    .feature-card-body ul {
      list-style: none;
      padding: 0;
    }
    .feature-card-body li {
      padding-left: 16px;
      position: relative;
      margin-bottom: 4px;
    }
    .feature-card-body li::before {
      content: "\2192";
      color: var(--aws-orange);
      position: absolute;
      left: 0;
    }

    /* Stats */
    .stats-row {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
      margin-top: 16px;
    }
    @media (max-width: 600px) {
      .stats-row { grid-template-columns: 1fr; }
    }
    .stat-card {
      background: linear-gradient(135deg, rgba(255, 153, 0, 0.15), rgba(140, 79, 255, 0.1));
      border-radius: 8px;
      padding: 20px;
      text-align: center;
      border: 1px solid rgba(255, 153, 0, 0.25);
    }
    .stat-value {
      font-size: 32px;
      font-weight: 700;
      color: var(--aws-orange);
      line-height: 1.2;
    }
    .stat-label {
      font-size: 13px;
      color: var(--aws-light-gray);
      margin-top: 4px;
    }

    /* Use Case */
    .usecase-cards {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
      margin-top: 16px;
    }
    @media (max-width: 700px) {
      .usecase-cards { grid-template-columns: 1fr; }
    }
    .usecase-card {
      background: rgba(255, 153, 0, 0.08);
      border: 1px solid rgba(255, 153, 0, 0.25);
      border-radius: 8px;
      padding: 16px;
    }
    .usecase-card-title {
      font-size: 15px;
      font-weight: 600;
      color: var(--aws-smile-orange);
      margin-bottom: 8px;
    }
    .usecase-card-body {
      font-size: 14px;
      color: var(--aws-light-gray);
    }
    .usecase-card-effect {
      margin-top: 10px;
      padding-top: 8px;
      border-top: 1px solid rgba(255, 153, 0, 0.15);
      font-size: 13px;
      color: var(--aws-green);
    }

    /* Spec Table */
    .spec-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 16px;
      font-size: 14px;
    }
    .spec-table th, .spec-table td {
      padding: 10px 14px;
      text-align: left;
      border-bottom: 1px solid rgba(255, 255, 255, 0.08);
    }
    .spec-table th {
      background: rgba(255, 153, 0, 0.15);
      color: var(--aws-orange);
      font-weight: 600;
      white-space: nowrap;
      width: 200px;
    }
    .spec-table td {
      color: var(--aws-light-gray);
    }

    /* Mermaid */
    .mermaid-container {
      background: #FFFFFF;
      border-radius: 12px;
      padding: 24px;
      margin: 20px 0;
      border: 2px solid rgba(255, 153, 0, 0.3);
      overflow-x: auto;
    }
    .mermaid {
      display: flex;
      justify-content: center;
    }

    /* Code Block */
    .code-block {
      background: #1a1a2e;
      border-radius: 8px;
      overflow: hidden;
      margin: 16px 0;
    }
    .code-header {
      background: #16213e;
      padding: 8px 16px;
      display: flex;
      justify-content: space-between;
      font-size: 12px;
    }
    .code-lang {
      color: var(--aws-orange);
      font-weight: bold;
    }
    .code-title {
      color: var(--aws-light-gray);
    }
    .code-block pre {
      margin: 0;
      padding: 0;
      overflow-x: auto;
    }
    .code-block code {
      font-family: 'Courier New', monospace;
      font-size: 13px;
      line-height: 1.5;
      padding: 16px !important;
    }

    /* Flow Diagram */
    .flow-diagram {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      flex-wrap: wrap;
      margin: 24px 0;
    }
    .flow-step {
      background: var(--aws-dark-squid);
      border: 2px solid var(--aws-orange);
      border-radius: 8px;
      padding: 12px 20px;
      text-align: center;
      min-width: 100px;
    }
    .flow-arrow {
      color: var(--aws-orange);
      font-size: 24px;
      font-weight: bold;
    }

    /* Merits / Demerits */
    .merit-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
      margin-top: 16px;
    }
    @media (max-width: 600px) {
      .merit-grid { grid-template-columns: 1fr; }
    }
    .merit-box {
      border-radius: 8px;
      padding: 16px;
    }
    .merit-business {
      background: rgba(29, 129, 2, 0.08);
      border: 1px solid rgba(29, 129, 2, 0.3);
    }
    .merit-tech {
      background: rgba(0, 161, 201, 0.08);
      border: 1px solid rgba(0, 161, 201, 0.3);
    }
    .merit-box h3 {
      font-size: 16px;
      margin-bottom: 10px;
    }
    .merit-business h3 { color: var(--aws-green); }
    .merit-tech h3 { color: var(--aws-teal); }
    .merit-box li {
      font-size: 14px;
      margin-bottom: 6px;
      list-style: none;
      padding-left: 20px;
      position: relative;
    }
    .merit-box li::before {
      content: "\2714";
      position: absolute;
      left: 0;
      font-weight: bold;
    }
    .merit-business li::before { color: var(--aws-green); }
    .merit-tech li::before { color: var(--aws-teal); }

    /* Caution */
    .caution-box {
      background: rgba(255, 152, 0, 0.08);
      border: 1px solid rgba(255, 152, 0, 0.3);
      border-radius: 8px;
      padding: 16px;
      margin-top: 16px;
    }
    .caution-box h3 {
      color: #FF9800;
      font-size: 16px;
      margin-bottom: 10px;
    }
    .caution-box li {
      font-size: 14px;
      margin-bottom: 6px;
      list-style: none;
      padding-left: 20px;
      position: relative;
    }
    .caution-box li::before {
      content: "\26A0";
      position: absolute;
      left: 0;
    }

    /* Related Services */
    .related-services {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-top: 16px;
    }
    @media (max-width: 600px) {
      .related-services { grid-template-columns: 1fr; }
    }
    .related-card {
      background: rgba(140, 79, 255, 0.08);
      border: 1px solid rgba(140, 79, 255, 0.25);
      border-radius: 8px;
      padding: 14px;
      text-align: center;
    }
    .related-card-name {
      font-size: 14px;
      font-weight: 600;
      color: var(--aws-purple);
      margin-bottom: 4px;
    }
    .related-card-desc {
      font-size: 13px;
      color: var(--aws-light-gray);
    }

    /* Setup steps */
    .setup-steps {
      counter-reset: step-counter;
      margin-top: 16px;
    }
    .setup-step {
      counter-increment: step-counter;
      display: flex;
      gap: 14px;
      align-items: flex-start;
      margin-bottom: 16px;
    }
    .step-number {
      background: var(--aws-orange);
      color: var(--aws-squid-ink);
      width: 28px;
      height: 28px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 14px;
      flex-shrink: 0;
    }
    .step-content {
      font-size: 14px;
    }
    .step-content strong {
      color: var(--aws-white);
    }

    /* Links */
    .aws-link {
      color: var(--aws-teal);
      text-decoration: none;
    }
    .aws-link:hover {
      color: var(--aws-smile-orange);
    }

    footer {
      margin-top: 24px;
      padding-top: 16px;
      border-top: 1px solid rgba(255, 255, 255, 0.2);
      font-size: 12px;
      color: var(--aws-light-gray);
    }
    footer a {
      color: var(--aws-teal);
      text-decoration: none;
      word-break: break-all;
    }
    footer a:hover {
      color: var(--aws-smile-orange);
    }
    footer ul {
      list-style: none;
      padding: 0;
      margin-top: 8px;
    }
    footer li {
      margin-bottom: 4px;
    }
  </style>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11/build/styles/atom-one-dark.min.css">
</head>
<body>
  <div class="container">

    <!-- Header -->
    <div class="header">
      <div class="header-left">
        <div class="service-badge">Amazon Bedrock</div>
        <h1>&#x1F4E6; バッチ推論での Converse API フォーマットサポート</h1>
        <div class="subtitle">リアルタイム推論とバッチ推論でモデルに依存しない統一フォーマットを実現</div>
      </div>
      <div class="header-right">
        <div class="release-date">&#x1F4C5; 2026 年 2 月 27 日</div>
      </div>
    </div>

    <!-- Overview -->
    <div class="section">
      <h2>&#x1F4CB; 概要</h2>
      <p>Amazon Bedrock のバッチ推論が、<span class="highlight">Converse API</span> をモデル呼び出しタイプとしてサポートするようになりました。これにより、バッチワークロードで<span class="highlight">モデルに依存しない統一的な入力フォーマット</span>を使用でき、リアルタイム推論とバッチ推論の両方で同じリクエストフォーマットを活用できます。</p>
      <p style="margin-top:12px;">従来、バッチ推論では InvokeModel API を使用したモデル固有のリクエストフォーマットが必要でしたが、今回のアップデートにより、プロンプト管理が簡素化され、モデル間の切り替えに必要な労力が大幅に削減されます。</p>

      <div class="before-after">
        <div class="before-box">
          <h3>&#x274C; アップデート前の課題</h3>
          <ul>
            <li>バッチ推論では InvokeModel API のモデル固有フォーマットが必要だった</li>
            <li>モデルごとに異なるリクエストフォーマットを管理する必要があった</li>
            <li>リアルタイム推論とバッチ推論でフォーマットが異なり、プロンプトの再利用が困難だった</li>
            <li>モデルを切り替える際にバッチ入力データの再フォーマットが必要だった</li>
          </ul>
        </div>
        <div class="after-box">
          <h3>&#x2705; アップデート後の改善</h3>
          <ul>
            <li>Converse API の統一フォーマットでバッチ推論が可能</li>
            <li>リアルタイム推論と同じフォーマットをバッチ推論に再利用可能</li>
            <li>モデル間の切り替えがフォーマット変更なしで実行可能</li>
            <li>コンソールと API の両方から Converse モデル呼び出しタイプを設定可能</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Stats -->
    <div class="section">
      <h2>&#x1F4CA; 数字で見るアップデート効果</h2>
      <div class="stats-row">
        <div class="stat-card">
          <div class="stat-value">5</div>
          <div class="stat-label">更新された API メソッド数</div>
        </div>
        <div class="stat-card">
          <div class="stat-value">1</div>
          <div class="stat-label">統一フォーマットで全モデル対応</div>
        </div>
        <div class="stat-card">
          <div class="stat-value">0</div>
          <div class="stat-label">追加料金</div>
        </div>
      </div>
    </div>

    <!-- Architecture Diagram -->
    <div class="section">
      <h2>&#x1F3D7;&#xFE0F; アーキテクチャ図</h2>
      <div class="mermaid-container">
        <pre class="mermaid">
flowchart TD
    subgraph Input["&#x1F4E5; 入力データ準備"]
        JSONL["&#x1F4C4; JSONL ファイル&lt;br/&gt;Converse API フォーマット"]
        S3In[("&#x1F6A3; S3 入力バケット")]
        JSONL --> S3In
    end

    subgraph BatchJob["&#x2699;&#xFE0F; バッチ推論ジョブ"]
        Create["&#x1F527; ジョブ作成&lt;br/&gt;Converse タイプ指定"]
        Process["&#x1F916; モデル推論実行"]
        Create --> Process
    end

    subgraph Output["&#x1F4E4; 出力データ"]
        S3Out[("&#x1F6A3; S3 出力バケット")]
        Results["&#x1F4C4; JSONL 出力&lt;br/&gt;Converse API レスポンス"]
        S3Out --> Results
    end

    S3In --> Create
    Process --> S3Out

    subgraph Unified["&#x1F504; 統一フォーマット"]
        direction LR
        RT["&#x26A1; リアルタイム推論&lt;br/&gt;Converse API"]
        BT["&#x1F4E6; バッチ推論&lt;br/&gt;Converse API"]
        RT ~~~ BT
    end

    classDef input fill:#E9F7EC,stroke:#66BB6A,stroke-width:2px,color:#333333
    classDef process fill:#FFE0B2,stroke:#FFCC80,stroke-width:2px,color:#5D4037
    classDef storage fill:#DCEDC8,stroke:#C5E1A5,stroke-width:2px,color:#33691E
    classDef output fill:#E8EAF6,stroke:#C5CAE9,stroke-width:2px,color:#283593
    classDef unified fill:#E3F2FD,stroke:#BBDEFB,stroke-width:2px,color:#1565C0

    class JSONL,Input input
    class Create,Process,BatchJob process
    class S3In,S3Out storage
    class Results,Output output
    class RT,BT,Unified unified
        </pre>
      </div>
      <p style="font-size:14px; color:var(--aws-light-gray); margin-top:8px;">Converse API フォーマットを使用することで、リアルタイム推論とバッチ推論で入出力フォーマットを統一できます。</p>
    </div>

    <!-- Key Features -->
    <div class="section">
      <h2>&#x1F527; 主要機能</h2>
      <div class="feature-cards">
        <div class="feature-card">
          <div class="feature-card-title">&#x1F4AC; Converse モデル呼び出しタイプ</div>
          <div class="feature-card-body">
            <ul>
              <li>バッチ推論ジョブ作成時に Converse をモデル呼び出しタイプとして選択可能</li>
              <li>入力データは Converse API のリクエストボディフォーマットに従う</li>
              <li>出力データは Converse API のレスポンスフォーマットに従う</li>
            </ul>
          </div>
        </div>
        <div class="feature-card">
          <div class="feature-card-title">&#x1F504; 統一リクエストフォーマット</div>
          <div class="feature-card-body">
            <ul>
              <li>リアルタイム推論と同じフォーマットをバッチで使用可能</li>
              <li>モデルに依存しない標準化されたフォーマット</li>
              <li>プロンプトの再利用とモデル切り替えが容易</li>
            </ul>
          </div>
        </div>
        <div class="feature-card">
          <div class="feature-card-title">&#x1F5A5;&#xFE0F; コンソールと API 対応</div>
          <div class="feature-card-body">
            <ul>
              <li>Amazon Bedrock コンソールから Converse タイプを選択可能</li>
              <li>API 経由でもプログラマティックに設定可能</li>
            </ul>
          </div>
        </div>
        <div class="feature-card">
          <div class="feature-card-title">&#x1F4C4; JSONL 入出力</div>
          <div class="feature-card-body">
            <ul>
              <li>入力は JSONL ファイルで Converse API フォーマットを使用</li>
              <li>出力も Converse API レスポンスフォーマットに従う</li>
              <li>S3 バケットを介したデータのやり取り</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- Technical Specs -->
    <div class="section">
      <h2>&#x2699;&#xFE0F; 技術仕様</h2>
      <h3 style="color:var(--aws-white); font-size:16px; margin-bottom:12px;">モデル呼び出しタイプの比較</h3>
      <table class="spec-table">
        <tr>
          <th>項目</th>
          <th>InvokeModel (従来)</th>
          <th>Converse (新規)</th>
        </tr>
        <tr>
          <td style="font-weight:600; color:var(--aws-orange);">フォーマット</td>
          <td>モデル固有</td>
          <td><span class="highlight">モデル非依存の統一フォーマット</span></td>
        </tr>
        <tr>
          <td style="font-weight:600; color:var(--aws-orange);">リアルタイムとの互換性</td>
          <td>InvokeModel API と同一</td>
          <td><span class="highlight">Converse API と同一</span></td>
        </tr>
        <tr>
          <td style="font-weight:600; color:var(--aws-orange);">モデル切り替え</td>
          <td>フォーマット変更が必要</td>
          <td><span class="highlight">フォーマット変更不要</span></td>
        </tr>
        <tr>
          <td style="font-weight:600; color:var(--aws-orange);">マルチモーダル対応</td>
          <td>モデル依存</td>
          <td><span class="highlight">標準化されたコンテンツブロック</span></td>
        </tr>
      </table>

      <h3 style="color:var(--aws-white); font-size:16px; margin-top:24px; margin-bottom:12px;">API 変更履歴</h3>
      <table class="spec-table">
        <tr>
          <th>日付</th>
          <td>2026 年 2 月 27 日</td>
        </tr>
        <tr>
          <th>サービス</th>
          <td>Amazon Bedrock</td>
        </tr>
        <tr>
          <th>変更内容</th>
          <td>5 つのメソッドが更新 - バッチ推論での Converse API サポート追加</td>
        </tr>
      </table>
    </div>

    <!-- Code Sample: Input Format -->
    <div class="section">
      <h2>&#x1F4DD; 入力データフォーマット</h2>
      <p style="font-size:14px; margin-bottom:12px;">バッチ推論の入力 JSONL ファイルでは、各行に以下の形式の JSON オブジェクトを記述します。</p>
      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">JSON</span>
          <span class="code-title">Converse API フォーマットの入力例</span>
        </div>
        <pre><code class="language-json">{
  "recordId": "record-001",
  "modelInput": {
    "messages": [
      {
        "role": "user",
        "content": [
          {
            "text": "Amazon Bedrock について説明してください"
          }
        ]
      }
    ],
    "inferenceConfig": {
      "maxTokens": 512,
      "temperature": 0.7
    }
  }
}</code></pre>
      </div>

      <p style="font-size:14px; margin-top:16px; margin-bottom:12px;">複数レコードの JSONL ファイル例:</p>
      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">JSONL</span>
          <span class="code-title">バッチ入力 JSONL ファイル</span>
        </div>
        <pre><code class="language-json">{"recordId": "1", "modelInput": {"messages": [{"role": "user", "content": [{"text": "AWS Lambda について説明してください"}]}]}}
{"recordId": "2", "modelInput": {"messages": [{"role": "user", "content": [{"text": "Amazon S3 のベストプラクティスは?"}]}]}}
{"recordId": "3", "modelInput": {"messages": [{"role": "user", "content": [{"text": "DynamoDB のパーティションキー設計のコツは?"}]}]}}</code></pre>
      </div>
    </div>

    <!-- Setup -->
    <div class="section">
      <h2>&#x1F680; 設定方法</h2>
      <h3 style="color:var(--aws-white); font-size:16px; margin-bottom:12px;">前提条件</h3>
      <div style="margin-bottom:16px; font-size:14px;">
        <div style="padding-left:16px; position:relative; margin-bottom:4px;"><span style="position:absolute;left:0;color:var(--aws-orange);">1.</span> Amazon Bedrock へのアクセス権限</div>
        <div style="padding-left:16px; position:relative; margin-bottom:4px;"><span style="position:absolute;left:0;color:var(--aws-orange);">2.</span> S3 バケット (入力データと出力データ用)</div>
        <div style="padding-left:16px; position:relative; margin-bottom:4px;"><span style="position:absolute;left:0;color:var(--aws-orange);">3.</span> バッチ推論用の IAM ロール</div>
        <div style="padding-left:16px; position:relative; margin-bottom:4px;"><span style="position:absolute;left:0;color:var(--aws-orange);">4.</span> JSONL 形式の入力データファイル</div>
      </div>

      <h3 style="color:var(--aws-white); font-size:16px; margin-bottom:12px;">手順</h3>
      <div class="setup-steps">
        <div class="setup-step">
          <div class="step-number">1</div>
          <div class="step-content">
            <strong>入力データの準備</strong><br/>
            Converse API フォーマットで JSONL ファイルを作成し、S3 バケットにアップロードします。
          </div>
        </div>
        <div class="setup-step">
          <div class="step-number">2</div>
          <div class="step-content">
            <strong>バッチ推論ジョブの作成</strong><br/>
            <code style="color:var(--aws-orange);">modelInvocationType</code> に <code style="color:var(--aws-orange);">Converse</code> を指定してジョブを作成します。
          </div>
        </div>
        <div class="setup-step">
          <div class="step-number">3</div>
          <div class="step-content">
            <strong>ジョブの確認と結果取得</strong><br/>
            ジョブのステータスを確認し、完了後に S3 から出力を取得します。
          </div>
        </div>
      </div>

      <div class="code-block" style="margin-top:16px;">
        <div class="code-header">
          <span class="code-lang">Python</span>
          <span class="code-title">バッチ推論ジョブの作成</span>
        </div>
        <pre><code class="language-python">import boto3

bedrock = boto3.client('bedrock')

response = bedrock.create_model_invocation_job(
    jobName='my-converse-batch-job',
    modelId='anthropic.claude-3-haiku-20240307-v1:0',
    roleArn='arn:aws:iam::123456789012:role/BedrockBatchRole',
    inputDataConfig={
        's3InputDataConfig': {
            's3Uri': 's3://my-bucket/input/'
        }
    },
    outputDataConfig={
        's3OutputDataConfig': {
            's3Uri': 's3://my-bucket/output/'
        }
    },
    modelInvocationType='Converse'  # Converse タイプを指定
)</code></pre>
      </div>

      <div class="code-block" style="margin-top:16px;">
        <div class="code-header">
          <span class="code-lang">Python</span>
          <span class="code-title">ジョブステータスの確認</span>
        </div>
        <pre><code class="language-python"># ジョブのステータスを確認
status = bedrock.get_model_invocation_job(
    jobIdentifier=response['jobArn']
)
print(f"Status: {status['status']}")

# 完了後、S3 から出力を取得</code></pre>
      </div>
    </div>

    <!-- Use Cases -->
    <div class="section">
      <h2>&#x1F3AF; ユースケース</h2>
      <div class="usecase-cards">
        <div class="usecase-card">
          <div class="usecase-card-title">&#x1F4DD; 大規模コンテンツ生成</div>
          <div class="usecase-card-body">
            マーケティングチームが数千件の製品説明を一括生成。リアルタイムでプロンプトをテストした後、同じ Converse API フォーマットでバッチ処理に移行できます。
          </div>
          <div class="usecase-card-effect">&#x2705; リアルタイムでテスト済みのプロンプトをそのままバッチ処理に転用可能</div>
        </div>
        <div class="usecase-card">
          <div class="usecase-card-title">&#x1F50D; マルチモデル評価</div>
          <div class="usecase-card-body">
            同じプロンプトセットで複数のモデルの出力品質を比較。Converse フォーマットの統一入力データを使用し、モデル ID のみを変更してバッチジョブを実行できます。
          </div>
          <div class="usecase-card-effect">&#x2705; フォーマット変更なしでモデル間の比較が可能</div>
        </div>
      </div>
    </div>

    <!-- Merits -->
    <div class="section">
      <h2>&#x2705; メリット</h2>
      <div class="merit-grid">
        <div class="merit-box merit-business">
          <h3>&#x1F4BC; ビジネス面</h3>
          <ul>
            <li><strong>運用効率化</strong>: プロンプト管理の統一によりチームの生産性が向上</li>
            <li><strong>コスト最適化</strong>: モデル切り替えに伴うフォーマット変更作業が不要</li>
            <li><strong>迅速なイテレーション</strong>: リアルタイムでテストしたプロンプトをそのままバッチに転用可能</li>
          </ul>
        </div>
        <div class="merit-box merit-tech">
          <h3>&#x1F52C; 技術面</h3>
          <ul>
            <li><strong>フォーマット統一</strong>: リアルタイムとバッチで同じ Converse API フォーマットを使用</li>
            <li><strong>モデル非依存</strong>: モデルを切り替えても入力データの変更が不要</li>
            <li><strong>プロンプト再利用</strong>: リアルタイム推論用のプロンプトをバッチにそのまま適用可能</li>
            <li><strong>標準化された出力</strong>: Converse API レスポンスフォーマットで一貫した出力</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Demerits / Limitations -->
    <div class="section">
      <h2>&#x26A0;&#xFE0F; デメリット・制約事項</h2>
      <div class="caution-box">
        <h3>制限事項</h3>
        <ul>
          <li>バッチ推論はプロビジョンドモデルではサポートされない</li>
          <li>入力ファイルの最小・最大レコード数の制限がある</li>
          <li>出力 JSONL ファイルのレコード順序は入力の順序と一致しない場合がある</li>
        </ul>
      </div>
      <div class="caution-box" style="margin-top:12px;">
        <h3>考慮すべき点</h3>
        <ul>
          <li>既存の InvokeModel フォーマットのバッチジョブは引き続き使用可能</li>
          <li>S3 URI を使用するプロンプトの場合、すべてのリソースが同じ S3 バケットとフォルダ内にある必要がある</li>
          <li>バッチ推論のクォータ (最小レコード数、最大レコード数、ファイルサイズ) を確認する必要がある</li>
        </ul>
      </div>
    </div>

    <!-- Pricing -->
    <div class="section">
      <h2>&#x1F4B0; 料金</h2>
      <p style="font-size:14px;">バッチ推論の料金は、使用するモデルと処理するトークン数に基づきます。<span class="highlight">Converse API フォーマットの使用に追加料金は発生しません</span>。</p>
      <p style="font-size:14px; margin-top:8px;">詳細は <a href="https://aws.amazon.com/bedrock/pricing/" target="_blank" class="aws-link">Amazon Bedrock 料金ページ</a> を参照してください。</p>
    </div>

    <!-- Region -->
    <div class="section">
      <h2>&#x1F30D; 利用可能リージョン</h2>
      <p style="font-size:14px;">Amazon Bedrock バッチ推論をサポートするすべての AWS リージョンで利用可能です。</p>
    </div>

    <!-- Related Services -->
    <div class="section">
      <h2>&#x1F517; 関連サービス・機能</h2>
      <div class="related-services">
        <div class="related-card">
          <div class="related-card-name">&#x1F4AC; Amazon Bedrock Converse API</div>
          <div class="related-card-desc">リアルタイム推論で使用する統一 API</div>
        </div>
        <div class="related-card">
          <div class="related-card-name">&#x1F50C; Amazon Bedrock InvokeModel API</div>
          <div class="related-card-desc">モデル固有フォーマットによる推論</div>
        </div>
        <div class="related-card">
          <div class="related-card-name">&#x1F6A3; Amazon S3</div>
          <div class="related-card-desc">バッチ推論の入出力データストレージ</div>
        </div>
        <div class="related-card">
          <div class="related-card-name">&#x1F310; OpenAI Batch API</div>
          <div class="related-card-desc">OpenAI 互換バッチ処理</div>
        </div>
      </div>
    </div>

    <!-- Summary -->
    <div class="section" style="border: 2px solid var(--aws-orange);">
      <h2>&#x1F4DD; まとめ</h2>
      <p style="font-size:15px;">Amazon Bedrock バッチ推論での <span class="highlight">Converse API フォーマットサポート</span>により、リアルタイム推論とバッチ推論でモデルに依存しない統一的なリクエストフォーマットを使用できるようになりました。これによりプロンプト管理が簡素化され、モデル間の切り替えも容易になります。</p>
      <p style="font-size:15px; margin-top:12px;">既存の InvokeModel フォーマットも引き続き使用可能なため、段階的な移行が可能です。バッチ推論ワークロードの運用効率化を検討している組織は、Converse API フォーマットの採用を推奨します。</p>
    </div>

    <!-- Footer -->
    <footer>
      <p>&#x1F4CE; 出典:</p>
      <ul>
        <li><a href="https://aws.amazon.com/about-aws/whats-new/2026/02/amazon-bedrock-batch-inference-supports-converse-api-format/" target="_blank">公式発表 (What's New)</a></li>
        <li><a href="https://docs.aws.amazon.com/bedrock/latest/userguide/batch-inference-create.html" target="_blank">バッチ推論ジョブの作成</a></li>
        <li><a href="https://docs.aws.amazon.com/bedrock/latest/userguide/batch-inference-data.html" target="_blank">バッチ推論データのフォーマットとアップロード</a></li>
        <li><a href="https://docs.aws.amazon.com/bedrock/latest/userguide/batch-inference.html" target="_blank">バッチ推論の概要</a></li>
        <li><a href="https://aws.amazon.com/bedrock/pricing/" target="_blank">Amazon Bedrock 料金ページ</a></li>
      </ul>
    </footer>

  </div>

  <!-- highlight.js -->
  <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11/build/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>

  <!-- Mermaid.js -->
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: 'base',
      themeVariables: {
        primaryColor: '#FF9900',
        primaryTextColor: '#232F3E',
        primaryBorderColor: '#FF9900',
        lineColor: '#FF9900',
        secondaryColor: '#F5F5F5',
        tertiaryColor: '#FAFAFA',
        background: '#FFFFFF',
        mainBkg: '#FFF3E0',
        nodeBorder: '#FF9900',
        clusterBkg: '#FFF8E1',
        clusterBorder: '#FF9900',
        edgeLabelBackground: '#FFFFFF',
        textColor: '#232F3E'
      }
    });
  </script>
</body>
</html>
